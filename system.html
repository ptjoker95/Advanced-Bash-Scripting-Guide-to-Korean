<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>System and Administrative Commands</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7">
<link rel="HOME" title="Advanced Bash-Scripting Guide" href="./index.html">
<link rel="UP" title="Commands" href="./part4.html">
<link rel="PREVIOUS" title="Miscellaneous Commands" href="./extmisc.html">
<link rel="NEXT" title="Analyzing a System Script" href="./sysscripts.html">
</head>
<body class="CHAPTER" alink="#0000FF" bgcolor="#FFFFFF" link="#0000FF" text="#000000" vlink="#840084">
<div id="dic_bubble" class="selection_bubble fontSize13 noSelect" style="z-index: 9999; border: 1px solid rgb(74, 174, 222); visibility: hidden;">
</div>
<div class="NAVHEADER">
<table summary="Header navigation table" border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<th colspan="3" align="center">Advanced Bash-Scripting Guide: </th>
</tr>
<tr>
<td align="left" valign="bottom" width="10%">
<a href="./extmisc.html" accesskey="P">Prev</a>
</td>
<td align="center" valign="bottom" width="80%">
</td>
<td align="right" valign="bottom" width="10%">
<a href="./sysscripts.html" accesskey="N">Next</a>
</td>
</tr>
</tbody>
</table>
<hr align="LEFT" width="100%">
</div>
<div class="CHAPTER">
<h1>
<a name="SYSTEM">
</a>Chapter 17. System and Administrative Commands</h1>
<p>The startup and shutdown scripts in 
	<tt class="FILENAME">/etc/rc.d</tt> illustrate the uses
	(and usefulness) of many of these comands. These are usually
	invoked by <i class="FIRSTTERM">root</i> and used for system
	maintenance or emergency filesystem repairs. Use with caution, as
	some of these commands may damage your system if misused.</p>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="USERSGROUPS1">
</a>Users and Groups</b>
</p>
<dl>
<dt>
<a name="USERSREF">
</a>
<b class="COMMAND">users</b>
</dt>
<dd>
<p>Show all logged on users. This is the approximate
	      equivalent of <b class="COMMAND">who -q</b>.</p>
</dd>
<dt>
<a name="GROUPSCMDREF">
</a>
<b class="COMMAND">groups</b>
</dt>
<dd>
<p>Lists the current user and the groups she belongs to.
	       This corresponds to the <a href="./internalvariables.html#GROUPSREF">$GROUPS</a> internal variable,
	       but gives the group names, rather than the numbers.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>groups</b>
</tt>
<tt class="COMPUTEROUTPUT">bozita cdrom cdwriter audio xgrp</tt>

<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>echo $GROUPS</b>
</tt>
<tt class="COMPUTEROUTPUT">501</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="CHOWNREF">
</a>
<b class="COMMAND">chown</b>, 
<a name="CHGRPREF">
</a>
<b class="COMMAND">chgrp</b>
</dt>
<dd>
<p>
<b class="COMMAND">chown</b> 명령어는 파일들의 소유자를 바꿉니다. 이 명령어는 
<i class="FIRSTTERM">관리자</i> 가 파일 소유주를 한 사용자로부터 다른 사용자로 
바꿀 때 유용합니다. 일반 사용자는 파일의 사용자를 바꿀 수 없습니다, 비록 자신의 
파일이라도 말입니다.
<a name="AEN14695" href="#FTN.AEN14695">
<span class="footnote">[1]</span>
</a>
</p>
<p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">root# </tt><tt class="USERINPUT"><b>chown bozo *.txt</b></tt>
<tt class="COMPUTEROUTPUT">
</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
<p>
<b class="COMMAND">chgrp</b> 명령어는 파일들의 
<tt class="REPLACEABLE">
<i>group</i>
</tt> 소유자를 바꿉니다. 이 동작을 하기 위해선 사용자는 파일들의 소유자이거나 
목표 그룹의 한명 ( 또는 <i class="FIRSTTERM">관리자</i>) 이어야 합니다.
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">chgrp --recursive dunderheads *.data
#  The "dunderheads" group will now own all the "*.data" files
#+ all the way down the $PWD directory tree (that's what "recursive" means).</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt>
<a name="USERADDREF">
</a>
<b class="COMMAND">useradd</b>, <b class="COMMAND">userdel</b>
</dt>
<dd>
<p>
<b class="COMMAND">useradd</b> 명령어는 시스템에 유저 계정을 만들고, 
지정해주면 특정 유저에게 home 디렉토리를 만들어줍니다. 비슷한 
<b class="COMMAND">userdel</b> 명령어는 시스템에서 유저 계정을 지우고
<a name="AEN14727" href="#FTN.AEN14727"><span class="footnote">[2]</span></a>, 
연결되어 있는 파일들을 지웁니다.</p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>
<b class="COMMAND">adduser</b> 는 
<b class="COMMAND">useradd</b> 의 동의어이고, 보통 심볼릭 링크입니다.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="USERMODREF">
</a>
<b class="COMMAND">usermod</b>
</dt>
<dd>
<p>Modify a user account. Changes may be made to the password,
	      group membership, expiration date, and other attributes of
	      a given user's account. With this command, a user's password
	      may be locked, which has the effect of disabling the
	      account.</p>
</dd>
<dt>
<a name="GROUPMODREF">
</a>
<b class="COMMAND">groupmod</b>
</dt>
<dd>
<p>Modify a given group. The group name and/or ID number may be
	      changed using this command.</p>
</dd>
<dt>
<a name="IDREF">
</a>
<b class="COMMAND">id</b>
</dt>
<dd>
<p>The <b class="COMMAND">id</b> command lists the real and
	      effective user IDs and the group IDs of the user
	      associated with the current process. This is the
	      counterpart to the <a href="./internalvariables.html#UIDREF">$UID</a>,
	      <a href="./internalvariables.html#EUIDREF">$EUID</a>, and <a href="./internalvariables.html#GROUPSREF">$GROUPS</a> internal Bash
	      variables.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>id</b>
</tt>
<tt class="COMPUTEROUTPUT">uid=501(bozo) gid=501(bozo) groups=501(bozo),22(cdrom),80(cdwriter),81(audio)</tt>

<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>echo $UID</b>
</tt>
<tt class="COMPUTEROUTPUT">501</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>The <b class="COMMAND">id</b> command shows the
	      <em>effective</em> IDs only when they differ
	      from the <em>real</em> ones.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>Also see <a href="./internalvariables.html#AMIROOT">Example 9-5</a>.</p>
</dd>
<dt>
<a name="LIDREF">
</a>
<b class="COMMAND">lid</b>
</dt>
<dd>
<p>The <i class="FIRSTTERM">lid</i> (list ID) command
	      shows the group(s) that a given user belongs to, or alternately,
	      the users belonging to a given group. May be invoked only by
	      root.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">root# </tt>
<tt class="USERINPUT">
<b>lid bozo</b>
</tt>
<tt class="COMPUTEROUTPUT"> bozo(gid=500)</tt>


<tt class="PROMPT">root# </tt>
<tt class="USERINPUT">
<b>lid daemon</b>
</tt>
<tt class="COMPUTEROUTPUT"> bin(gid=1)
  daemon(gid=2)
  adm(gid=4)
  lp(gid=7)</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="WHOREF">
</a>
<b class="COMMAND">who</b>
</dt>
<dd>
<p>Show all users logged on to the system.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>who</b>
</tt>
<tt class="COMPUTEROUTPUT">bozo  tty1     Apr 27 17:45
 bozo  pts/0    Apr 27 17:46
 bozo  pts/1    Apr 27 17:47
 bozo  pts/2    Apr 27 17:49</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>The <tt class="OPTION">-m</tt> gives detailed information about
	      only the current user. Passing any two arguments to
	      <b class="COMMAND">who</b> is the equivalent of <b class="COMMAND">who
	      -m</b>, as in <b class="COMMAND">who am i</b> or <b class="COMMAND">who
	      The Man</b>.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>who -m</b>
</tt>
<tt class="COMPUTEROUTPUT">localhost.localdomain!bozo  pts/2    Apr 27 17:49</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>
<a name="WHOAMIREF">
</a>
<b class="COMMAND">whoami</b> is similar to <b class="COMMAND">who
	      -m</b>, but only lists the user name.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>whoami</b>
</tt>
<tt class="COMPUTEROUTPUT">bozo</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="WREF">
</a>
<b class="COMMAND">w</b>
</dt>
<dd>
<p>Show all logged on users and the processes belonging to them. This is
	      an extended version of <b class="COMMAND">who</b>. The output of <b class="COMMAND">w</b>
	      may be piped to <a href="./textproc.html#GREPREF">grep</a> to find
	      a specific user and/or process.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>w | grep startx</b>
</tt>
<tt class="COMPUTEROUTPUT">bozo  tty1     -                 4:22pm  6:41   4.47s  0.45s  startx</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="LOGNAMEREF">
</a>
<b class="COMMAND">logname</b>
</dt>
<dd>
<p>Show current user's login name (as found in
	      <tt class="FILENAME">/var/run/utmp</tt>). This is a
	      near-equivalent to <a href="./system.html#WHOAMIREF">whoami</a>,
	      above.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>logname</b>
</tt>
<tt class="COMPUTEROUTPUT">bozo</tt>

<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>whoami</b>
</tt>
<tt class="COMPUTEROUTPUT">bozo</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
<p>However . . .</p>
<p>	    <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>su</b>
</tt>
<tt class="COMPUTEROUTPUT">Password: ......</tt>

<tt class="PROMPT">bash# </tt>
<tt class="USERINPUT">
<b>whoami</b>
</tt>
<tt class="COMPUTEROUTPUT">root</tt>
<tt class="PROMPT">bash# </tt>
<tt class="USERINPUT">
<b>logname</b>
</tt>
<tt class="COMPUTEROUTPUT">bozo</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>	    
	    </p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>While <b class="COMMAND">logname</b> prints the name
	      of the logged in user, <b class="COMMAND">whoami</b> gives the
	      name of the user attached to the current process. As we have
	      just seen, sometimes these are not the same.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="SUREF">
</a>
<b class="COMMAND">su</b>
</dt>
<dd>
<p>Runs a program or script as a
	      <b class="COMMAND">s</b>ubstitute <b class="COMMAND">u</b>ser.
	      <b class="COMMAND">su rjones</b> starts a shell as user
	      <em>rjones</em>. A naked <b class="COMMAND">su</b>
	      defaults to <i class="FIRSTTERM">root</i>.  See <a href="./contributed-scripts.html#FIFO">Example A-14</a>.</p>
</dd>
<dt>
<a name="SUDOREF">
</a>
<b class="COMMAND">sudo</b>
</dt>
<dd>
<p>Runs a command as <i class="FIRSTTERM">root</i> (or
	      another user). This may be used in a script, thus permitting
	      a <i class="FIRSTTERM">regular user</i> to run the script.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash

# Some commands.
sudo cp /root/secretfile /home/bozo/secret
# Some more commands.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
<p>The file <tt class="FILENAME">/etc/sudoers</tt> holds
	      the names of users permitted to invoke
	      <b class="COMMAND">sudo</b>.</p>
</dd>
<dt>
<a name="PASSWDREF">
</a>
<b class="COMMAND">passwd</b>
</dt>
<dd>
<p>Sets, changes, or manages a user's password.</p>
<p>The <b class="COMMAND">passwd</b> command can be used in
	      a script, but probably <em>should not</em> be.</p>
<div class="EXAMPLE">
<a name="SETNEWPW">
</a>
<p>
<b>Example 17-1. Setting a new password</b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash
#  setnew-password.sh: For demonstration purposes only.
#                      Not a good idea to actually run this script.
#  This script must be run as root.

ROOT_UID=0         # Root has $UID 0.
E_WRONG_USER=65    # Not root?

E_NOSUCHUSER=70
SUCCESS=0


if [ "$UID" -ne "$ROOT_UID" ]
then
  echo; echo "Only root can run this script."; echo
  exit $E_WRONG_USER
else
  echo
  echo "You should know better than to run this script, root."
  echo "Even root users get the blues... "
  echo
fi  


username=bozo
NEWPASSWORD=security_violation

# Check if bozo lives here.
grep -q "$username" /etc/passwd
if [ $? -ne $SUCCESS ]
then
  echo "User $username does not exist."
  echo "No password changed."
  exit $E_NOSUCHUSER
fi  

echo "$NEWPASSWORD" | passwd --stdin "$username"
#  The '--stdin' option to 'passwd' permits
#+ getting a new password from stdin (or a pipe).

echo; echo "User $username's password changed!"

# Using the 'passwd' command in a script is dangerous.

exit 0</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
<p>The <b class="COMMAND">passwd</b> command's <tt class="OPTION">-l</tt>,
	      <tt class="OPTION">-u</tt>, and <tt class="OPTION">-d</tt> options permit
	      locking, unlocking, and deleting a user's password. Only
	      <i class="FIRSTTERM">root</i> may use these options.</p>
</dd>
<dt>
<a name="ACREF">
</a>
<b class="COMMAND">ac</b>
</dt>
<dd>
<p>유저가 로그인한 시간을, 
<tt class="FILENAME">/var/log/wtmp</tt> 에서 읽어서 보여줍니다. 
이 명령어는 GNU 계정 유틸리티 중 하나입니다.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>ac</b></tt>
<tt class="COMPUTEROUTPUT">        total       68.08</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="LASTREF">
</a>
<b class="COMMAND">last</b>
</dt>
<dd>
<p>List <em>last</em> logged in users, as read from
	      <tt class="FILENAME">/var/log/wtmp</tt>. This command can also
	      show remote logins.</p>
<p>For example, to show the last few times the system
	      rebooted:</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>last reboot</b>
</tt>
<tt class="COMPUTEROUTPUT">reboot   system boot  2.6.9-1.667      Fri Feb  4 18:18          (00:02)    
 reboot   system boot  2.6.9-1.667      Fri Feb  4 15:20          (01:27)    
 reboot   system boot  2.6.9-1.667      Fri Feb  4 12:56          (00:49)    
 reboot   system boot  2.6.9-1.667      Thu Feb  3 21:08          (02:17)    
 . . .

 wtmp begins Tue Feb  1 12:50:09 2005</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="NEWGRPREF">
</a>
<b class="COMMAND">newgrp</b>
</dt>
<dd>
<p>Change user's <i class="FIRSTTERM">group ID</i> without
	      logging out. This permits access to the new group's
	      files. Since users may be members of multiple groups
	      simultaneously, this command finds only limited use.</p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>Kurt Glaesemann points out that the
	      <i class="FIRSTTERM">newgrp</i> command could prove helpful
	      in setting the default group permissions for files a user
	      writes. However, the <a href="./system.html#CHGRPREF">chgrp</a>
	      command might be more convenient for this purpose.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="TERMINALSSYS1">
</a>Terminals</b>
</p>
<dl>
<dt>
<a name="TTYREF">
</a>
<b class="COMMAND">tty</b>
</dt>
<dd>
<p>Echoes the name (filename) of the current user's terminal.
	      Note that each separate <i class="FIRSTTERM">xterm</i>
	      window counts as a different terminal.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>tty</b>
</tt>
<tt class="COMPUTEROUTPUT">/dev/pts/1</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="STTYREF">
</a>
<b class="COMMAND">stty</b>
</dt>
<dd>
<p>Shows and/or changes terminal settings. This complex
	      command, used in a script, can control terminal behavior
	      and the way output displays. See the info page, and study
	      it carefully.</p>
<div class="EXAMPLE">
<a name="ERASE">
</a>
<p>
<b>Example 17-2. Setting an <i class="FIRSTTERM">erase</i> character</b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash
# erase.sh: Using "stty" to set an erase character when reading input.

echo -n "What is your name? "
read name                      #  Try to backspace
                               #+ to erase characters of input.
                               #  Problems?
echo "Your name is $name."

stty erase '#'                 #  Set "hashmark" (#) as erase character.
echo -n "What is your name? "
read name                      #  Use # to erase last character typed.
echo "Your name is $name."

exit 0

# Even after the script exits, the new key value remains set.
# Exercise: How would you reset the erase character to the default value?</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
<div class="EXAMPLE">
<a name="SECRETPW">
</a>
<p>
<b>Example 17-3. <i class="FIRSTTERM">secret password</i>:
	      Turning off terminal echoing </b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash
# secret-pw.sh: secret password

echo
echo -n "Enter password "
read passwd
echo "password is $passwd"
echo -n "If someone had been looking over your shoulder, "
echo "your password would have been compromised."

echo &amp;&amp; echo  # Two line-feeds in an "and list."


stty -echo    # Turns off screen echo.
#   May also be done with
#   read -sp passwd
#   A big Thank You to Leigh James for pointing this out.

echo -n "Enter password again "
read passwd
echo
echo "password is $passwd"
echo

stty echo     # Restores screen echo.

exit 0

# Do an 'info stty' for more on this useful-but-tricky command.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
<p>A creative use of <b class="COMMAND">stty</b> is detecting a
	      user keypress (without hitting
	      <b class="KEYCAP">ENTER</b>).</p>
<div class="EXAMPLE">
<a name="KEYPRESS">
</a>
<p>
<b>Example 17-4. Keypress detection</b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash
# keypress.sh: Detect a user keypress ("hot keys").

echo

old_tty_settings=$(stty -g)   # Save old settings (why?).
stty -icanon
Keypress=$(head -c1)          # or $(dd bs=1 count=1 2&gt; /dev/null)
                              # on non-GNU systems

echo
echo "Key pressed was \""$Keypress"\"."
echo

stty "$old_tty_settings"      # Restore old settings.

# Thanks, Stephane Chazelas.

exit 0</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
<p>Also see <a href="./internalvariables.html#TIMEOUT">Example 9-3</a> and <a href="./contributed-scripts.html#STOPWATCH">Example A-43</a>.</p>
<p>
<a name="TERMINALSREF">
</a>
</p>
<table class="SIDEBAR" border="1" cellpadding="5">
<tbody>
<tr>
<td>
<div class="SIDEBAR">
<a name="AEN15053">
</a>
<p>
<b>terminals and modes</b>
</p>
<p>Normally, a terminal works in the
	      <i class="FIRSTTERM">canonical</i> mode.  When a user hits a
	      key, the resulting character does not immediately go to
	      the program actually running in this terminal.  A buffer
	      local to the terminal stores keystrokes. When the user
	      hits the <b class="KEYCAP">ENTER</b> key, this sends all the
	      stored keystrokes to the program running.  There is even
	      a basic line editor inside the terminal.</p>
<p>	        <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>stty -a</b>
</tt>
<tt class="COMPUTEROUTPUT">speed 9600 baud; rows 36; columns 96; line = 0;
 intr = ^C; quit = ^\; erase = ^H; kill = ^U; eof = ^D; eol = &lt;undef&gt;; eol2 = &lt;undef&gt;;
 start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R; werase = ^W; lnext = ^V; flush = ^O;
 ...
 isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt</tt>
                </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>Using canonical mode, it is possible to redefine the
              special keys for the local terminal line editor.

	        <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>cat &gt; filexxx</b>
</tt>
<tt class="USERINPUT">
<b>wha&lt;ctl-W&gt;I&lt;ctl-H&gt;foo bar&lt;ctl-U&gt;hello world&lt;ENTER&gt;</b>
</tt>
<tt class="USERINPUT">
<b>&lt;ctl-D&gt;</b>
</tt>
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>cat filexxx</b>
</tt>
<tt class="COMPUTEROUTPUT">hello world</tt>		
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>wc -c &lt; filexxx</b>
</tt>
<tt class="COMPUTEROUTPUT">12</tt>		
                </pre>
</font>
</td>
</tr>
</tbody>
</table>

              The process controlling the terminal receives only 12
              characters (11 alphabetic ones, plus a newline), although
              the user hit 26 keys.
            </p>
<p>In non-canonical (<span class="QUOTE">"raw"</span>) mode, every
              key hit (including special editing keys such as
              <b class="KEYCAP">ctl-H</b>) sends a character immediately to
              the controlling process.</p>
<p>The Bash prompt disables both <tt class="OPTION">icanon</tt>
              and <tt class="OPTION">echo</tt>, since it replaces the basic
              terminal line editor with its own more elaborate one. For
              example, when you hit <b class="KEYCAP">ctl-A</b> at the Bash
              prompt, there's no <b class="KEYCAP">^A</b> echoed by the
              terminal, but Bash gets a <b class="KEYCAP">\1</b> character,
              interprets it, and moves the cursor to the begining of
              the line.</p>
<p>
<em>St?phane Chazelas</em>
</p>
</div>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="SETTERMREF">
</a>
<b class="COMMAND">setterm</b>
</dt>
<dd>
<p>Set certain terminal attributes. This command writes
	      to its terminal's <tt class="FILENAME">stdout</tt> a string that
	      changes the behavior of that terminal.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>setterm -cursor off</b>
</tt>
<tt class="COMPUTEROUTPUT">bash$</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>The <b class="COMMAND">setterm</b> command can be used within a
	      script to change the appearance of text written to
	      <tt class="FILENAME">stdout</tt>, although there are certainly
	      <a href="./colorizing.html#COLORIZINGREF">better tools</a> available
	      for this purpose.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">setterm -bold on
echo bold hello

setterm -bold off
echo normal hello</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt>
<a name="TSETREF">
</a>
<b class="COMMAND">tset</b>
</dt>
<dd>
<p>Show or initialize terminal settings. 
	      This is a less capable version of
	      <b class="COMMAND">stty</b>.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>tset -r</b>
</tt>
<tt class="COMPUTEROUTPUT">Terminal type is xterm-xfree86.
 Kill is control-U (^U).
 Interrupt is control-C (^C).</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="SETSERIALREF">
</a>
<b class="COMMAND">setserial</b>
</dt>
<dd>
<p>Set or display serial port parameters. This command must be
	      run by <i class="FIRSTTERM">root</i> and is usually found in a
	      system setup script.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING"># From /etc/pcmcia/serial script:

IRQ=`setserial /dev/$DEVICE | sed -e 's/.*IRQ: //'`
setserial /dev/$DEVICE irq 0 ; setserial /dev/$DEVICE irq $IRQ</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt>
<a name="GETTYREF">
</a>
<b class="COMMAND">getty</b>, <a name="AGETTYREF">
</a>
<b class="COMMAND">agetty</b>
</dt>
<dd>
<p>터미널 초기화 프로세스는 유저가 로그인할 때 
<b class="COMMAND">getty</b> 나 
<b class="COMMAND">agetty</b> 를 사용합니다. 
이 명령어들은 유저 쉘 스크립트에서는 사용하지 않습니다. 
스크립트에서는 
<b class="COMMAND">stty</b> 를 사용합니다.</p>
</dd>
<dt>
<a name="MESGREF">
</a>
<b class="COMMAND">mesg</b>
</dt>
<dd>
<p>Enables or disables write access to the current user's
	      terminal.  Disabling access would prevent another user
	      on the network to <a href="./communications.html#WRITEREF">write</a>
	      to the terminal.</p>
<div class="TIP">
<p>
</p>
<table class="TIP" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/tip.gif" alt="Tip" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>It can be quite annoying to have a message
	      about ordering pizza suddenly appear in the middle of
	      the text file you are editing. On a multi-user network,
	      you might therefore wish to disable write access to your
	      terminal when you need to avoid interruptions.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="WALLREF">
</a>
<b class="COMMAND">wall</b>
</dt>
<dd>
<p>This is an acronym for <span class="QUOTE">"<a href="./communications.html#WRITEREF">write</a> all,"</span> i.e., sending
	      a message to all users at every terminal logged into the
	      network. It is primarily a system administrator's tool,
	      useful, for example, when warning everyone that the
	      system will shortly go down due to a problem (see <a href="./here-docs.html#EX70">Example 19-1</a>).</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>wall System going down for maintenance in 5 minutes!</b>
</tt>
<tt class="COMPUTEROUTPUT">Broadcast message from bozo (pts/1) Sun Jul  8 13:53:27 2001...

 System going down for maintenance in 5 minutes!</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>If write access to a particular terminal has been
	      disabled with <b class="COMMAND">mesg</b>, then
	      <b class="COMMAND">wall</b> cannot send a message to
	      that terminal.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="STATISTICSSYS1">
</a>Information and Statistics</b>
</p>
<dl>
<dt>
<a name="UNAMEREF">
</a>
<b class="COMMAND">uname</b>
</dt>
<dd>
<p>Output system specifications (OS, kernel version,
	      etc.) to <tt class="FILENAME">stdout</tt>.  Invoked with the
	      <tt class="OPTION">-a</tt> option, gives verbose system info
	      (see <a href="./moreadv.html#EX41">Example 16-5</a>). The <tt class="OPTION">-s</tt>
	      option shows only the OS type.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>uname</b>
</tt>
<tt class="COMPUTEROUTPUT">Linux</tt>

<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>uname -s</b>
</tt>
<tt class="COMPUTEROUTPUT">Linux</tt>


<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>uname -a</b>
</tt>
<tt class="COMPUTEROUTPUT">Linux iron.bozo 2.6.15-1.2054_FC5 #1 Tue Mar 14 15:48:33 EST 2006
 i686 i686 i386 GNU/Linux</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="ARCHREF">
</a>
<b class="COMMAND">arch</b>
</dt>
<dd>
<p>시스템 아키텍쳐를 보여줍니다. <b class="COMMAND">uname -m</b> 과 같습니다. 
<a href="./testbranch.html#CASECMD">예 11-27</a> 를 참고하세요.
</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>arch</b></tt>
<tt class="COMPUTEROUTPUT">i686</tt>

<tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>uname -m</b></tt>
<tt class="COMPUTEROUTPUT">i686</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="LASTCOMMREF">
</a>
<b class="COMMAND">lastcomm</b>
</dt>
<dd>
<p>Gives information about previous commands, as stored
	      in the <tt class="FILENAME">/var/account/pacct</tt> file. Command
	      name and user name can be specified by options. This is
	      one of the GNU accounting utilities.</p>
</dd>
<dt>
<a name="LASTLOGREF">
</a>
<b class="COMMAND">lastlog</b>
</dt>
<dd>
<p>List the last login time of all system users. This
	      references the <tt class="FILENAME">/var/log/lastlog</tt>
	      file.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>lastlog</b>
</tt>
<tt class="COMPUTEROUTPUT">root          tty1                      Fri Dec  7 18:43:21 -0700 2001
 bin                                     **Never logged in**
 daemon                                  **Never logged in**
 ...
 bozo          tty1                      Sat Dec  8 21:14:29 -0700 2001</tt>



<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>lastlog | grep root</b>
</tt>
<tt class="COMPUTEROUTPUT">root          tty1                      Fri Dec  7 18:43:21 -0700 2001</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	      </p>
<div class="CAUTION">
<p>
</p>
<table class="CAUTION" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/caution.gif" alt="Caution" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>This command will fail if the user invoking
		it does not have read permission for the
		<tt class="FILENAME">/var/log/lastlog</tt> file.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="LSOFREF">
</a>
<b class="COMMAND">lsof</b>
</dt>
<dd>
<p>List open files. This command outputs a detailed
	      table of all currently open files and gives information
	      about their owner, size, the processes associated with
	      them, and more. Of course, <b class="COMMAND">lsof</b> may
	      be piped to <a href="./textproc.html#GREPREF">grep</a> and/or
	      <a href="./awk.html#AWKREF">awk</a> to parse and analyze
	      its results.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>lsof</b>
</tt>
<tt class="COMPUTEROUTPUT">COMMAND    PID    USER   FD   TYPE     DEVICE    SIZE     NODE NAME
 init         1    root  mem    REG        3,5   30748    30303 /sbin/init
 init         1    root  mem    REG        3,5   73120     8069 /lib/ld-2.1.3.so
 init         1    root  mem    REG        3,5  931668     8075 /lib/libc-2.1.3.so
 cardmgr    213    root  mem    REG        3,5   36956    30357 /sbin/cardmgr
 ...</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>The <b class="COMMAND">lsof</b> command is a useful,
	      if complex administrative tool. If you are unable to
	      dismount a filesystem and get an error message that it is
	      still in use, then running <i class="FIRSTTERM">lsof</i> helps
	      determine which files are still open on that filesystem. The
	      <tt class="OPTION">-i</tt> option lists open network socket files,
	      and this can help trace intrusion or hack attempts.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>lsof -an -i tcp</b>
</tt>
<tt class="COMPUTEROUTPUT">COMMAND  PID USER  FD  TYPE DEVICE SIZE NODE NAME
 firefox 2330 bozo  32u IPv4   9956       TCP 66.0.118.137:57596-&gt;67.112.7.104:http ...
 firefox 2330 bozo  38u IPv4  10535       TCP 66.0.118.137:57708-&gt;216.79.48.24:http ...</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>See <a href="./networkprogramming.html#IPADDRESSES">Example 30-2</a> for an effective use
              of <b class="COMMAND">lsof</b>.</p>
</dd>
<dt>
<a name="STRACEREF">
</a>
<b class="COMMAND">strace</b>
</dt>
<dd>
<p>
<b class="COMMAND">S</b>ystem <b class="COMMAND">trace</b>:
	      diagnostic and debugging tool for tracing <i class="FIRSTTERM">system
	      calls</i> and signals. This command and
	      <b class="COMMAND">ltrace</b>, following, are useful for
	      diagnosing why a given program or package fails to
	      run . . . perhaps due to missing libraries or related
	      causes.</p>
<p>	    <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>strace df</b>
</tt>
<tt class="COMPUTEROUTPUT">execve("/bin/df", ["df"], [/* 45 vars */]) = 0
 uname({sys="Linux", node="bozo.localdomain", ...}) = 0
 brk(0)                                  = 0x804f5e4

 ...</tt>
	    </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>This is the Linux equivalent of
	      the Solaris <b class="COMMAND">truss</b> command.</p>
</dd>
<dt>
<a name="LTRACEREF">
</a>
<b class="COMMAND">ltrace</b>
</dt>
<dd>
<p>
<b class="COMMAND">L</b>ibrary <b class="COMMAND">trace</b>:
	      diagnostic and debugging tool that traces <i class="FIRSTTERM">library calls</i>
	      invoked by a given command.</p>
<p>	    <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>ltrace df</b>
</tt>
<tt class="COMPUTEROUTPUT">__libc_start_main(0x804a910, 1, 0xbfb589a4, 0x804fb70, 0x804fb68 &lt;unfinished ...&gt;:
 setlocale(6, "")                                 = "en_US.UTF-8"
bindtextdomain("coreutils", "/usr/share/locale") = "/usr/share/locale"
textdomain("coreutils")                          = "coreutils"
__cxa_atexit(0x804b650, 0, 0, 0x8052bf0, 0xbfb58908) = 0
getenv("DF_BLOCK_SIZE")                          = NULL

 ...</tt>
	    </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="NCREF">
</a>
<b class="COMMAND">nc</b>
</dt>
<dd>
<p>The <b class="COMMAND">nc</b> (<i class="FIRSTTERM">netcat</i>)
	      utility is a complete toolkit for connecting to and
	      listening to TCP and UDP ports. It is useful as a diagnostic
	      and testing tool and as a component in simple script-based HTTP
	      clients and servers.</p>
<p>	    <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>nc localhost.localdomain 25</b>
</tt>
<tt class="COMPUTEROUTPUT">220 localhost.localdomain ESMTP Sendmail 8.13.1/8.13.1;
 Thu, 31 Mar 2005 15:41:35 -0700</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>A real-life <a href="./process-sub.html#NETCATEXAMPLE">usage
	      example</a>.</p>
<div class="EXAMPLE">
<a name="ISCAN">
</a>
<p>
<b>Example 17-5. Checking a remote server for
              <i class="FIRSTTERM">identd</i>
</b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#! /bin/sh
## Duplicate DaveG's ident-scan thingie using netcat. Oooh, he'll be p*ssed.
## Args: target port [port port port ...]
## Hose stdout _and_ stderr together.
##
##  Advantages: runs slower than ident-scan, giving remote inetd less cause
##+ for alarm, and only hits the few known daemon ports you specify.
##  Disadvantages: requires numeric-only port args, the output sleazitude,
##+ and won't work for r-services when coming from high source ports.
# Script author: Hobbit &lt;hobbit@avian.org&gt;
# Used in ABS Guide with permission.

# ---------------------------------------------------
E_BADARGS=65       # Need at least two args.
TWO_WINKS=2        # How long to sleep.
THREE_WINKS=3
IDPORT=113         # Authentication "tap ident" port.
RAND1=999
RAND2=31337
TIMEOUT0=9
TIMEOUT1=8
TIMEOUT2=4
# ---------------------------------------------------

case "${2}" in
  "" ) echo "Need HOST and at least one PORT." ; exit $E_BADARGS ;;
esac

# Ping 'em once and see if they *are* running identd.
nc -z -w $TIMEOUT0 "$1" $IDPORT || \
{ echo "Oops, $1 isn't running identd." ; exit 0 ; }
#  -z scans for listening daemons.
#     -w $TIMEOUT = How long to try to connect.

# Generate a randomish base port.
RP=`expr $$ % $RAND1 + $RAND2`

TRG="$1"
shift

while test "$1" ; do
  nc -v -w $TIMEOUT1 -p ${RP} "$TRG" ${1} &lt; /dev/null &gt; /dev/null &amp;
  PROC=$!
  sleep $THREE_WINKS
  echo "${1},${RP}" | nc -w $TIMEOUT2 -r "$TRG" $IDPORT 2&gt;&amp;1
  sleep $TWO_WINKS

# Does this look like a lamer script or what . . . ?
# ABS Guide author comments: "Ain't really all that bad . . .
#+                            kinda clever, actually."

  kill -HUP $PROC
  RP=`expr ${RP} + 1`
  shift
done

exit $?

#  Notes:
#  -----

#  Try commenting out line 30 and running this script
#+ with "localhost.localdomain 25" as arguments.

#  For more of Hobbit's 'nc' example scripts,
#+ look in the documentation:
#+ the /usr/share/doc/nc-X.XX/scripts directory.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
<p>	      And, of course, there's Dr. Andrew Tridgell's notorious
	      one-line script in the BitKeeper Affair:
	        <table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">echo clone | nc thunk.org 5000 &gt; e2fsprogs.dat</pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="FREEREF">
</a>
<b class="COMMAND">free</b>
</dt>
<dd>
<p>Shows memory and cache usage in tabular form. The
	      output of this command lends itself to parsing, using
	      <a href="./textproc.html#GREPREF">grep</a>, <a href="./awk.html#AWKREF">awk</a> or <b class="COMMAND">Perl</b>. The
	      <b class="COMMAND">procinfo</b> command shows all the
	      information that <b class="COMMAND">free</b> does, and much
	      more.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<b class="COMMAND">free</b>
<tt class="COMPUTEROUTPUT">                total       used       free     shared    buffers     cached
   Mem:         30504      28624       1880      15820       1608       16376
   -/+ buffers/cache:      10640      19864
   Swap:        68540       3128      65412</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
<p>To show unused RAM memory:</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<b class="COMMAND">free | grep Mem | awk '{ print $4 }'</b>
<tt class="COMPUTEROUTPUT">1880</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="PROCINFOREF">
</a>
<b class="COMMAND">procinfo</b>
</dt>
<dd>
<p>Extract and list information and statistics from the
	      <a href="./devproc.html#DEVPROCREF">
<tt class="FILENAME">/proc</tt>
	      pseudo-filesystem</a>. This gives a very extensive and
	      detailed listing.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>procinfo | grep Bootup</b>
</tt>
<tt class="COMPUTEROUTPUT">Bootup: Wed Mar 21 15:15:50 2001    Load average: 0.04 0.21 0.34 3/47 6829</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="LSDEVREF">
</a>
<b class="COMMAND">lsdev</b>
</dt>
<dd>
<p>List devices, that is, show installed hardware.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>lsdev</b>
</tt>
<tt class="COMPUTEROUTPUT">Device            DMA   IRQ  I/O Ports
 ------------------------------------------------
 cascade             4     2 
 dma                          0080-008f
 dma1                         0000-001f
 dma2                         00c0-00df
 fpu                          00f0-00ff
 ide0                     14  01f0-01f7 03f6-03f6
 ...</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	      </p>
</dd>
<dt>
<a name="DUREF">
</a>
<b class="COMMAND">du</b>
</dt>
<dd>
<p>Show (disk) file usage, recursively. Defaults to current
	      working directory, unless otherwise specified.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<b class="COMMAND">du -ach</b>
<tt class="COMPUTEROUTPUT">1.0k    ./wi.sh
 1.0k    ./tst.sh
 1.0k    ./random.file
 6.0k    .
 6.0k    total</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="DFREF">
</a>
<b class="COMMAND">df</b>
</dt>
<dd>
<p>Shows filesystem usage in tabular form.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<b class="COMMAND">df</b>
<tt class="COMPUTEROUTPUT">Filesystem           1k-blocks      Used Available Use% Mounted on
 /dev/hda5               273262     92607    166547  36% /
 /dev/hda8               222525    123951     87085  59% /home
 /dev/hda7              1408796   1075744    261488  80% /usr</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="DMESGREF">
</a>
<b class="COMMAND">dmesg</b>
</dt>
<dd>
<p>Lists all system bootup messages to
	      <tt class="FILENAME">stdout</tt>. Handy for debugging and
	      ascertaining which device drivers were installed
	      and which system interrupts in use. The output
	      of <b class="COMMAND">dmesg</b> may, of course, be
	      parsed with <a href="./textproc.html#GREPREF">grep</a>,
	      <a href="./sedawk.html#SEDREF">sed</a>, or <a href="./awk.html#AWKREF">awk</a> from within a script.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>dmesg | grep hda</b>
</tt>
<tt class="COMPUTEROUTPUT">Kernel command line: ro root=/dev/hda2
 hda: IBM-DLGA-23080, ATA DISK drive
 hda: 6015744 sectors (3080 MB) w/96KiB Cache, CHS=746/128/63
 hda: hda1 hda2 hda3 &lt; hda5 hda6 hda7 &gt; hda4</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="STATREF">
</a>
<b class="COMMAND">stat</b>
</dt>
<dd>
<p>Gives detailed and verbose <em>stat</em>istics 
	      on a given file (even a directory or device file) or set
	      of files.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>stat test.cru</b>
</tt>
<tt class="COMPUTEROUTPUT">  File: "test.cru"
   Size: 49970        Allocated Blocks: 100          Filetype: Regular File
   Mode: (0664/-rw-rw-r--)         Uid: (  501/ bozo)  Gid: (  501/ bozo)
 Device:  3,8   Inode: 18185     Links: 1    
 Access: Sat Jun  2 16:40:24 2001
 Modify: Sat Jun  2 16:40:24 2001
 Change: Sat Jun  2 16:40:24 2001</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>If the target file does not exist, <b class="COMMAND">stat</b>
	      returns an error message.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>stat nonexistent-file</b>
</tt>
<tt class="COMPUTEROUTPUT">nonexistent-file: No such file or directory</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>In a script, you can use <b class="COMMAND">stat</b> to extract
	      information about files (and filesystems) and set variables
	      accordingly.</p>
<p>	      <table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash
# fileinfo2.sh

# Per suggestion of Jo?l Bourquard and . . .
# http://www.linuxquestions.org/questions/showthread.php?t=410766


FILENAME=testfile.txt
file_name=$(stat -c%n "$FILENAME")   # Same as "$FILENAME" of course.
file_owner=$(stat -c%U "$FILENAME")
file_size=$(stat -c%s "$FILENAME")
#  Certainly easier than using "ls -l $FILENAME"
#+ and then parsing with sed.
file_inode=$(stat -c%i "$FILENAME")
file_type=$(stat -c%F "$FILENAME")
file_access_rights=$(stat -c%A "$FILENAME")

echo "File name:          $file_name"
echo "File owner:         $file_owner"
echo "File size:          $file_size"
echo "File inode:         $file_inode"
echo "File type:          $file_type"
echo "File access rights: $file_access_rights"

exit 0

sh fileinfo2.sh

File name:          testfile.txt
File owner:         bozo
File size:          418
File inode:         1730378
File type:          regular file
File access rights: -rw-rw-r--</pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="VMSTATREF">
</a>
<b class="COMMAND">vmstat</b>
</dt>
<dd>
<p>Display virtual memory statistics.</p>
<p>	    <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>vmstat</b>
</tt>
<tt class="COMPUTEROUTPUT">   procs                      memory    swap          io system         cpu
 r  b  w   swpd   free   buff  cache  si  so    bi    bo   in    cs  us  sy id
 0  0  0      0  11040   2636  38952   0   0    33     7  271    88   8   3 89</tt>
	    </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="UPTIMEREF">
</a>
<b class="COMMAND">uptime</b>
</dt>
<dd>
<p>Shows how long the system has been running, along with
	      associated statistics.</p>
<p>	    <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>uptime</b>
</tt>
<tt class="COMPUTEROUTPUT">10:28pm  up  1:57,  3 users,  load average: 0.17, 0.34, 0.27</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>A <i class="FIRSTTERM">load average</i> of 1 or less
	      indicates that the system handles processes immediately. A load
	      average greater than 1 means that processes are being queued. When
	      the load average gets above 3 (on a single-core processor),
	      then system performance is significantly degraded.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="HNAMEREF">
</a>
<b class="COMMAND">hostname</b>
</dt>
<dd>
<p>Lists the system's host name. This command sets the host
	      name in an <tt class="FILENAME">/etc/rc.d</tt>
	      setup script (<tt class="FILENAME">/etc/rc.d/rc.sysinit</tt>
	      or similar).  It is equivalent to <b class="COMMAND">uname
	      -n</b>,  and a counterpart to the <a href="./internalvariables.html#HOSTNAMEREF">$HOSTNAME</a> internal
	      variable.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>hostname</b>
</tt>
<tt class="COMPUTEROUTPUT">localhost.localdomain</tt>

<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>echo $HOSTNAME</b>
</tt>
<tt class="COMPUTEROUTPUT">localhost.localdomain</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
<p>Similar to the <b class="COMMAND">hostname</b> command are the
	      <b class="COMMAND">domainname</b>,
	      <b class="COMMAND">dnsdomainname</b>,
	      <b class="COMMAND">nisdomainname</b>, and
	      <b class="COMMAND">ypdomainname</b> commands. Use these to
	      display or set the system DNS or NIS/YP domain name. Various
	      options to <b class="COMMAND">hostname</b> also perform these
	      functions.</p>
</dd>
<dt>
<a name="HOSTIDREF">
</a>
<b class="COMMAND">hostid</b>
</dt>
<dd>
<p>Echo a 32-bit hexadecimal numerical identifier for the
	      host machine.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>hostid</b>
</tt>
<tt class="COMPUTEROUTPUT">7f0100</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>This command allegedly fetches a <span class="QUOTE">"unique"</span>
	      serial number for a particular system. Certain
	      product registration procedures use this number
	      to brand a particular user license. Unfortunately,
	      <b class="COMMAND">hostid</b> only returns the machine
	      network address in hexadecimal, with pairs of bytes
	      transposed.</p>
<p>The network address of a typical non-networked Linux
	      machine, is found in <tt class="FILENAME">/etc/hosts</tt>.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>cat /etc/hosts</b>
</tt>
<tt class="COMPUTEROUTPUT">127.0.0.1               localhost.localdomain localhost</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>As it happens, transposing the bytes of
	      <tt class="USERINPUT">
<b>127.0.0.1</b>
</tt>, we get
	      <tt class="USERINPUT">
<b>0.127.1.0</b>
</tt>, which translates in
	      hex to <tt class="USERINPUT">
<b>007f0100</b>
</tt>, the exact equivalent
	      of what <b class="COMMAND">hostid</b> returns, above. There
	      exist only a few million other Linux machines with this
	      identical <i class="FIRSTTERM">hostid</i>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="SARREF">
</a>
<b class="COMMAND">sar</b>
</dt>
<dd>
<p>Invoking <b class="COMMAND">sar</b> (System Activity Reporter)
	      gives a very detailed rundown on system statistics. The
	      Santa Cruz Operation (<span class="QUOTE">"Old"</span> SCO) released
	      <b class="COMMAND">sar</b> as Open Source in June, 1999.</p>
<p>This command is not part of the base Linux distribution,
	      but may be obtained as part of the<a href="http://perso.wanadoo.fr/sebastien.godard/" target="_top">	      sysstat utilities</a> package, written by <a href="mailto:sebastien.godard@wanadoo.fr" target="_top">Sebastien
	      Godard</a>.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>sar</b>
</tt>
<tt class="COMPUTEROUTPUT">Linux 2.4.9 (brooks.seringas.fr) 	09/26/03

10:30:00          CPU     %user     %nice   %system   %iowait     %idle
10:40:00          all      2.21     10.90     65.48      0.00     21.41
10:50:00          all      3.36      0.00     72.36      0.00     24.28
11:00:00          all      1.12      0.00     80.77      0.00     18.11
Average:          all      2.23      3.63     72.87      0.00     21.27

14:32:30          LINUX RESTART

15:00:00          CPU     %user     %nice   %system   %iowait     %idle
15:10:00          all      8.59      2.40     17.47      0.00     71.54
15:20:00          all      4.07      1.00     11.95      0.00     82.98
15:30:00          all      0.79      2.94      7.56      0.00     88.71
Average:          all      6.33      1.70     14.71      0.00     77.26</tt>
           </pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="READELFREF">
</a>
<b class="COMMAND">readelf</b>
</dt>
<dd>
<p>Show information and statistics about a designated
	      <i class="FIRSTTERM">elf</i> binary. This is part of the
	      <i class="FIRSTTERM">binutils</i> package.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>readelf -h /bin/bash</b>
</tt>
<tt class="COMPUTEROUTPUT">ELF Header:
   Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
   Class:                             ELF32
   Data:                              2's complement, little endian
   Version:                           1 (current)
   OS/ABI:                            UNIX - System V
   ABI Version:                       0
   Type:                              EXEC (Executable file)
   . . .</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="SIZEREF">
</a>
<b class="COMMAND">size</b>
</dt>
<dd>
<p>The <b class="COMMAND">size [/path/to/binary]</b> command
	      gives the segment sizes of a binary executable or archive file.
	      This is mainly of use to programmers.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>size /bin/bash</b>
</tt>
<tt class="COMPUTEROUTPUT">   text    data     bss     dec     hex filename
  495971   22496   17392  535859   82d33 /bin/bash</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="SYSLOG1">
</a>System Logs</b>
</p>
<dl>
<dt>
<a name="LOGGERREF">
</a>
<b class="COMMAND">logger</b>
</dt>
<dd>
<p>Appends a user-generated message to the system log
	      (<tt class="FILENAME">/var/log/messages</tt>). You do not have
	      to be <i class="FIRSTTERM">root</i> to invoke
	      <b class="COMMAND">logger</b>.</p>
<p>	      <table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">logger Experiencing instability in network connection at 23:10, 05/21.
# Now, do a 'tail /var/log/messages'.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
<p>By embedding a <b class="COMMAND">logger</b> command in a script,
	      it is possible to write debugging information to
	      <tt class="FILENAME">/var/log/messages</tt>.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">logger -t $0 -i Logging at line "$LINENO".
# The "-t" option specifies the tag for the logger entry.
# The "-i" option records the process ID.

# tail /var/log/message
# ...
# Jul  7 20:48:58 localhost ./test.sh[1712]: Logging at line 3.</pre>
</font>
</td>
</tr>
</tbody>
</table>
            </p>
</dd>
<dt>
<a name="LOGROTATEREF">
</a>
<b class="COMMAND">logrotate</b>
</dt>
<dd>
<p>This utility manages the system log files, rotating,
	      compressing, deleting, and/or e-mailing them, as appropriate.
	      This keeps the <tt class="FILENAME">/var/log</tt>
	      from getting cluttered with old log files.
	      Usually <a href="./system.html#CRONREF">cron</a> runs
	      <b class="COMMAND">logrotate</b> on a daily basis.</p>
<p>Adding an appropriate entry to
	       <tt class="FILENAME">/etc/logrotate.conf</tt> makes it possible
	       to manage personal log files, as well as system-wide
	       ones.</p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>Stefano Falsetto has created <a href="http://www.gnu.org/software/rottlog/" target="_top">rottlog</a>,
	     which he considers to be an improved version of
	     <b class="COMMAND">logrotate</b>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="JOBCONTROLSYS1">
</a>Job Control</b>
</p>
<dl>
<dt>
<a name="PPSSREF">
</a>
<b class="COMMAND">ps</b>
</dt>
<dd>
<p>
<tt class="REPLACEABLE">
<i>P</i>
</tt>rocess
	      <tt class="REPLACEABLE">
<i>S</i>
</tt>tatistics: lists currently
	      executing processes by owner and PID (process ID). This
	      is usually invoked with <tt class="OPTION">ax</tt> or
	      <tt class="OPTION">aux</tt> options,
	      and may be piped to <a href="./textproc.html#GREPREF">grep</a>
	      or <a href="./sedawk.html#SEDREF">sed</a> to search for a
	      specific process (see <a href="./internal.html#EX44">Example 15-14</a> and <a href="./procref1.html#PIDID">Example 29-3</a>).</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b> ps ax | grep sendmail</b>
</tt>
<tt class="COMPUTEROUTPUT">295 ?	   S	  0:00 sendmail: accepting connections on port 25</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
<p>To display system processes in graphical <span class="QUOTE">"tree"</span>
	      format: <b class="COMMAND">ps afjx</b> or
	      <b class="COMMAND">ps ax --forest</b>.</p>
</dd>
<dt>
<a name="PGREPREF">
</a>
<b class="COMMAND">pgrep</b>, <a name="PKILLREF">
</a>
<b class="COMMAND">pkill</b>
</dt>
<dd>
<p>Combining the <b class="COMMAND">ps</b> command
	      with <a href="./textproc.html#GREPREF">grep</a> or
	      <a href="./x9644.html#KILLREF">kill</a>.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>ps a | grep mingetty</b>
</tt>
<tt class="COMPUTEROUTPUT">2212 tty2     Ss+    0:00 /sbin/mingetty tty2
 2213 tty3     Ss+    0:00 /sbin/mingetty tty3
 2214 tty4     Ss+    0:00 /sbin/mingetty tty4
 2215 tty5     Ss+    0:00 /sbin/mingetty tty5
 2216 tty6     Ss+    0:00 /sbin/mingetty tty6
 4849 pts/2    S+     0:00 grep mingetty</tt>


<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>pgrep mingetty</b>
</tt>
<tt class="COMPUTEROUTPUT">2212 mingetty
 2213 mingetty
 2214 mingetty
 2215 mingetty
 2216 mingetty</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>Compare the action of <b class="COMMAND">pkill</b> with <a href="./x9644.html#KILLALLREF">killall</a>.</p>
</dd>
<dt>
<a name="PSTREEREF">
</a>
<b class="COMMAND">pstree</b>
</dt>
<dd>
<p>Lists currently executing processes in
	      <span class="QUOTE">"tree"</span> format. The <tt class="OPTION">-p</tt> option
	      shows the PIDs, as well as the process names.</p>
</dd>
<dt>
<a name="TOPREF">
</a>
<b class="COMMAND">top</b>
</dt>
<dd>
<p>Continuously updated display of most cpu-intensive
	      processes. The <tt class="OPTION">-b</tt> option displays in text
	      mode, so that the output may be parsed or accessed from
	      a script.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>top -b</b>
</tt>
<tt class="COMPUTEROUTPUT">  8:30pm  up 3 min,  3 users,  load average: 0.49, 0.32, 0.13
 45 processes: 44 sleeping, 1 running, 0 zombie, 0 stopped
 CPU states: 13.6% user,  7.3% system,  0.0% nice, 78.9% idle
 Mem:    78396K av,   65468K used,   12928K free,       0K shrd,    2352K buff
 Swap:  157208K av,       0K used,  157208K free                   37244K cached

   PID USER     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME COMMAND
   848 bozo      17   0   996  996   800 R     5.6  1.2   0:00 top
     1 root       8   0   512  512   444 S     0.0  0.6   0:04 init
     2 root       9   0     0    0     0 SW    0.0  0.0   0:00 keventd
   ...</tt>  
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="NICEREF">
</a>
<b class="COMMAND">nice</b>
</dt>
<dd>
<p>
<a name="NICE2REF">
</a>
</p>
<p>Run a background job with an altered
	      priority. Priorities run from 19 (lowest) to -20
	      (highest). Only <i class="FIRSTTERM">root</i> may set the
	      negative (higher) priorities. Related commands are
	      <b class="COMMAND">renice</b> and <b class="COMMAND">snice</b>,
	      which change the priority of a running process or
	      processes, and <b class="COMMAND">skill</b>, which sends a
	      <a href="./x9644.html#KILLREF">kill</a> signal to a process
	      or processes.</p>
</dd>
<dt>
<a name="NOHUPREF">
</a>
<b class="COMMAND">nohup</b>
</dt>
<dd>
<p>Keeps a command running even after user logs off.
	      The command will run as a foreground process unless followed
	      by <span class="TOKEN">&amp;</span>.  If you use <b class="COMMAND">nohup</b>
	      within a script, consider coupling it with a <a href="./x9644.html#WAITREF">wait</a> to avoid creating an
	      <i class="FIRSTTERM">orphan</i> or
	      <a href="./x9644.html#ZOMBIEREF">zombie</a> process.</p>
</dd>
<dt>
<a name="PIDOFREF">
</a>
<b class="COMMAND">pidof</b>
</dt>
<dd>
<p>Identifies <i class="FIRSTTERM">process ID (PID)</i> of a
	    running job. Since job control commands, such as <a href="./x9644.html#KILLREF">kill</a> and <a href="./system.html#NICE2REF">renice</a> act on the
	    <i class="FIRSTTERM">PID</i> of a process (not its
	    name), it is sometimes necessary to identify that
	    <i class="FIRSTTERM">PID</i>. The <b class="COMMAND">pidof</b>
	    command is the approximate counterpart to the <a href="./internalvariables.html#PPIDREF">$PPID</a> internal variable.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>pidof xclock</b>
</tt>
<tt class="COMPUTEROUTPUT">880</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<div class="EXAMPLE">
<a name="KILLPROCESS">
</a>
<p>
<b>Example 17-6. <i class="FIRSTTERM">pidof</i> helps kill a process</b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash
# kill-process.sh

NOPROCESS=2

process=xxxyyyzzz  # Use nonexistent process.
# For demo purposes only...
# ... don't want to actually kill any actual process with this script.
#
# If, for example, you wanted to use this script to logoff the Internet,
#     process=pppd

t=`pidof $process`       # Find pid (process id) of $process.
# The pid is needed by 'kill' (can't 'kill' by program name).

if [ -z "$t" ]           # If process not present, 'pidof' returns null.
then
  echo "Process $process was not running."
  echo "Nothing killed."
  exit $NOPROCESS
fi  

kill $t                  # May need 'kill -9' for stubborn process.

# Need a check here to see if process allowed itself to be killed.
# Perhaps another " t=`pidof $process` " or ...


# This entire script could be replaced by
#        kill $(pidof -x process_name)
# or
#        killall process_name
# but it would not be as instructive.

exit 0</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="FUSERREF">
</a>
<b class="COMMAND">fuser</b>
</dt>
<dd>
<p>Identifies the processes (by PID) that are accessing
	      a given file, set of files, or directory. May also be
	      invoked with the <tt class="OPTION">-k</tt> option, which kills
	      those processes. This has interesting implications for
	      system security, especially in scripts preventing
	      unauthorized users from accessing system services.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>fuser -u /usr/bin/vim</b>
</tt>
<tt class="COMPUTEROUTPUT">/usr/bin/vim:         3207e(bozo)</tt>



<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>fuser -u /dev/null</b>
</tt>
<tt class="COMPUTEROUTPUT">/dev/null:            3009(bozo)  3010(bozo)  3197(bozo)  3199(bozo)</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>One important application for <b class="COMMAND">fuser</b> is
	     when physically inserting or removing storage media, such
	     as CD ROM disks or USB flash drives. Sometimes trying
	     a <a href="./system.html#UMOUNTREF">umount</a> fails with a
	     <span class="ERRORNAME">device is busy</span> error message. This
	     means that some user(s) and/or process(es) are accessing
	     the device. An <b class="COMMAND">fuser -um /dev/device_name</b>
	     will clear up the mystery, so you can kill any relevant
	     processes.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>umount /mnt/usbdrive</b>
</tt>
<tt class="COMPUTEROUTPUT">umount: /mnt/usbdrive: device is busy</tt>



<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>fuser -um /dev/usbdrive</b>
</tt>
<tt class="COMPUTEROUTPUT">/mnt/usbdrive:        1772c(bozo)</tt>

<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>kill -9 1772</b>
</tt>
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>umount /mnt/usbdrive</b>
</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p> The <b class="COMMAND">fuser</b> command, invoked with the
	      <tt class="OPTION">-n</tt> option identifies the processes
	      accessing a <i class="FIRSTTERM">port</i>. This
	      is especially useful in combination with <a href="./system.html#NMAPREF">nmap</a>.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">root# </tt>
<tt class="USERINPUT">
<b>nmap localhost.localdomain</b>
</tt>
<tt class="COMPUTEROUTPUT">PORT     STATE SERVICE
 25/tcp   open  smtp</tt>



<tt class="PROMPT">root# </tt>
<tt class="USERINPUT">
<b>fuser -un tcp 25</b>
</tt>
<tt class="COMPUTEROUTPUT">25/tcp:               2095(root)</tt>

<tt class="PROMPT">root# </tt>
<tt class="USERINPUT">
<b>ps ax | grep 2095 | grep -v grep</b>
</tt>
<tt class="COMPUTEROUTPUT">2095 ?        Ss     0:00 sendmail: accepting connections</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
            </p>
</dd>
<dt>
<a name="CRONREF">
</a>
<b class="COMMAND">cron</b>
</dt>
<dd>
<p>시스템 로그 파일들을 정리 그리고 지우고 
<span class="DATABASE">지정된</span> 데이터베이스를 업데이트 하거나 하는 작업을 지정하는, 
관리자 프로그램 스케쥴러. 이 명령어는 
<a href="./timedate.html#ATREF">at</a> 의 
<i class="FIRSTTERM">슈퍼유저</i> 버전입니다 (비록 다른 사용자들이 자신의 
<b class="COMMAND">crontab</b> 명령어로 
<tt class="FILENAME">crontab</tt> 파일을 가질 수 있지만).
<a href="./communications.html#DAEMONREF">daemon</a> 처럼 작동하고 
<tt class="FILENAME">/etc/crontab</tt> 에 스케쥴되어 있는 내용들을 실행합니다.</p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>어떤 리눅스는 
<b class="COMMAND">cron</b> 의 Mattew Dillon 버전인 
<b class="COMMAND">crond</b> 을 사용합니다.
</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="RUNCONTROLSYS1">
</a>Process Control and Booting</b>
</p>
<dl>
<dt>
<a name="INITREF">
</a>
<b class="COMMAND">init</b>
</dt>
<dd>
<p>
<a name="INITTABREF">
</a>
</p>
<p>The <b class="COMMAND">init</b> command is the <a href="./internal.html#FORKREF">parent</a> of all processes. Called
	      in the final step of a bootup, <b class="COMMAND">init</b>
	      determines the runlevel of the system from
	      <tt class="FILENAME">/etc/inittab</tt>. Invoked by its alias
	      <b class="COMMAND">telinit</b>, and by
	      <i class="FIRSTTERM">root</i> only.</p>
</dd>
<dt>
<a name="TELINITREF">
</a>
<b class="COMMAND">telinit</b>
</dt>
<dd>
<p>Symlinked to <b class="COMMAND">init</b>, this is a means of changing the system runlevel,
	      usually done for system maintenance or emergency filesystem
	      repairs. Invoked only by <i class="FIRSTTERM">root</i>. This
	      command can be dangerous -- be certain you understand it
	      well before using!</p>
</dd>
<dt>
<a name="RUNLEVELREF">
</a>
<b class="COMMAND">runlevel</b>
</dt>
<dd>
<p>Shows the current and last runlevel, that is, whether the system
	      is halted (runlevel <tt class="LITERAL">0</tt>), in single-user mode
	      (<tt class="LITERAL">1</tt>), in multi-user mode (<tt class="LITERAL">2</tt>
	      or <tt class="LITERAL">3</tt>), in X Windows (<tt class="LITERAL">5</tt>), or
	      rebooting (<tt class="LITERAL">6</tt>). This command accesses the
	      <tt class="FILENAME">/var/run/utmp</tt> file.</p>
</dd>
<dt>
<a name="HALTREF">
</a>
<b class="COMMAND">halt</b>, <a name="SHUTDOWNREF">
</a>
<b class="COMMAND">shutdown</b>, <a name="REBOOTREF">
</a>
<b class="COMMAND">reboot</b>
</dt>
<dd>
<p>Command set to shut the system down, usually just prior to a power down.</p>
<div class="WARNING">
<p>
</p>
<table class="WARNING" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/warning.gif" alt="Warning" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>On some Linux distros, the <b class="COMMAND">halt</b> command
	      has 755 permissions, so it can be invoked by a non-root user.
	      A careless <i class="FIRSTTERM">halt</i> in a terminal or a script
	      may shut down the system!</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="SERVICEREF">
</a>
<b class="COMMAND">service</b>
</dt>
<dd>
<p>Starts or stops a system <i class="FIRSTTERM">service</i>.
	    The startup scripts in <tt class="FILENAME">/etc/init.d</tt>
	    and <tt class="FILENAME">/etc/rc.d</tt> use this
	    command to start services at bootup.</p>
<p>
<a name="IPTABLES01">
</a>
</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">root# </tt>
<tt class="USERINPUT">
<b>/sbin/service iptables stop</b>
</tt>
<tt class="COMPUTEROUTPUT">Flushing firewall rules:                                   [  OK  ]
 Setting chains to policy ACCEPT: filter                    [  OK  ]
 Unloading iptables modules:                                [  OK  ]</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="NETWORKSYS1">
</a>Network</b>
</p>
<dl>
<dt>
<a name="NMAPREF">
</a>
<b class="COMMAND">nmap</b>
</dt>
<dd>
<p>
<b class="COMMAND">N</b>etwork <b class="COMMAND">map</b>per
	      and port scanner. This command scans a server to
	      locate open ports and the services associated with those
	      ports. It can also report information about packet filters and
	      firewalls. This is an important security tool for locking down
	      a network against hacking attempts.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash

SERVER=$HOST                           # localhost.localdomain (127.0.0.1).
PORT_NUMBER=25                         # SMTP port.

nmap $SERVER | grep -w "$PORT_NUMBER"  # Is that particular port open?
#              grep -w matches whole words only,
#+             so this wouldn't match port 1025, for example.

exit 0

# 25/tcp     open        smtp</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt>
<a name="IFCONFIGREF">
</a>
<b class="COMMAND">ifconfig</b>
</dt>
<dd>
<p>Network <i class="FIRSTTERM">interface configuration</i>
	      and tuning utility.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>ifconfig -a</b>
</tt>
<tt class="COMPUTEROUTPUT">lo        Link encap:Local Loopback
           inet addr:127.0.0.1  Mask:255.0.0.0
           UP LOOPBACK RUNNING  MTU:16436  Metric:1
           RX packets:10 errors:0 dropped:0 overruns:0 frame:0
           TX packets:10 errors:0 dropped:0 overruns:0 carrier:0
           collisions:0 txqueuelen:0 
           RX bytes:700 (700.0 b)  TX bytes:700 (700.0 b)</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
<p>The <b class="COMMAND">ifconfig</b> command is most often used
	      at bootup to set up the interfaces, or to shut them down
	      when rebooting.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING"># Code snippets from /etc/rc.d/init.d/network

# ...

# Check that networking is up.
[ ${NETWORKING} = "no" ] &amp;&amp; exit 0

[ -x /sbin/ifconfig ] || exit 0

# ...

for i in $interfaces ; do
  if ifconfig $i 2&gt;/dev/null | grep -q "UP" &gt;/dev/null 2&gt;&amp;1 ; then
    action "Shutting down interface $i: " ./ifdown $i boot
  fi
#  The GNU-specific "-q" option to "grep" means "quiet", i.e.,
#+ producing no output.
#  Redirecting output to /dev/null is therefore not strictly necessary.
       
# ...

echo "Currently active devices:"
echo `/sbin/ifconfig | grep ^[a-z] | awk '{print $1}'`
#                            ^^^^^  should be quoted to prevent globbing.
#  The following also work.
#    echo $(/sbin/ifconfig | awk '/^[a-z]/ { print $1 })'
#    echo $(/sbin/ifconfig | sed -e 's/ .*//')
#  Thanks, S.C., for additional comments.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
<p>See also <a href="./debugging.html#ONLINE">Example 32-6</a>.</p>
</dd>
<dt>
<a name="NETSTATREF">
</a>
<b class="COMMAND">netstat</b>
</dt>
<dd>
<p>Show current network statistics and information, 
	      such as routing tables and active connections. This utility
	      accesses information in <tt class="FILENAME">/proc/net</tt>
	      (<a href="./devproc.html">Chapter 29</a>). See <a href="./procref1.html#CONSTAT">Example 29-4</a>.</p>
<p>
<b class="COMMAND">netstat -r</b> is equivalent to <a href="./system.html#ROUTEREF">route</a>.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>netstat</b>
</tt>
<tt class="COMPUTEROUTPUT">Active Internet connections (w/o servers)
 Proto Recv-Q Send-Q Local Address           Foreign Address         State      
 Active UNIX domain sockets (w/o servers)
 Proto RefCnt Flags       Type       State         I-Node Path
 unix  11     [ ]         DGRAM                    906    /dev/log
 unix  3      [ ]         STREAM     CONNECTED     4514   /tmp/.X11-unix/X0
 unix  3      [ ]         STREAM     CONNECTED     4513
 . . .</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>A <b class="COMMAND">netstat -lptu</b> shows <a href="./devref1.html#SOCKETREF">sockets</a> that are listening
	    to ports, and the associated processes. This can be useful
	    for determining whether a computer has been hacked or
	    compromised.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="IWCONFIGREF">
</a>
<b class="COMMAND">iwconfig</b>
</dt>
<dd>
<p>This is the command set for configuring a wireless network.
	      It is the wireless equivalent of <b class="COMMAND">ifconfig</b>,
	      above.</p>
</dd>
<dt>
<a name="IPREF">
</a>
<b class="COMMAND">ip</b>
</dt>
<dd>
<p>General purpose utility for setting up, changing, and
	      analyzing <i class="FIRSTTERM">IP</i> (Internet Protocol)
	      networks and attached devices. This command is part of
	      the <i class="FIRSTTERM">iproute2</i> package.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>ip link show</b>
</tt>
<tt class="COMPUTEROUTPUT">1: lo: &lt;LOOPBACK,UP&gt; mtu 16436 qdisc noqueue 
     link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
 2: eth0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast qlen 1000
     link/ether 00:d0:59:ce:af:da brd ff:ff:ff:ff:ff:ff
 3: sit0: &lt;NOARP&gt; mtu 1480 qdisc noop 
     link/sit 0.0.0.0 brd 0.0.0.0</tt>


<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>ip route list</b>
</tt>
<tt class="COMPUTEROUTPUT">169.254.0.0/16 dev lo  scope link</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>Or, in a script:</p>
<p>
<a name="IPSCRIPT0">
</a>
              <table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash
# Script by Juan Nicolas Ruiz
# Used with his kind permission.

# Setting up (and stopping) a GRE tunnel.


# --- start-tunnel.sh ---

LOCAL_IP="192.168.1.17"
REMOTE_IP="10.0.5.33"
OTHER_IFACE="192.168.0.100"
REMOTE_NET="192.168.3.0/24"

/sbin/ip tunnel add netb mode gre remote $REMOTE_IP \
  local $LOCAL_IP ttl 255
/sbin/ip addr add $OTHER_IFACE dev netb
/sbin/ip link set netb up
/sbin/ip route add $REMOTE_NET dev netb

exit 0  #############################################

# --- stop-tunnel.sh ---

REMOTE_NET="192.168.3.0/24"

/sbin/ip route del $REMOTE_NET dev netb
/sbin/ip link set netb down
/sbin/ip tunnel del netb

exit 0</pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="ROUTEREF">
</a>
<b class="COMMAND">route</b>
</dt>
<dd>
<p>Show info about or make changes to the kernel routing table.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>route</b>
</tt>
<tt class="COMPUTEROUTPUT">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
 pm3-67.bozosisp *               255.255.255.255 UH       40 0          0 ppp0
 127.0.0.0       *               255.0.0.0       U        40 0          0 lo
 default         pm3-67.bozosisp 0.0.0.0         UG       40 0          0 ppp0</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="IPTABLESREF">
</a>
<b class="COMMAND">iptables</b>
</dt>
<dd>
<p>
<b class="COMMAND">iptables</b> 명령어는 네트웍 파이어월을 설정하는 등의 보안 
목적으로 주로 사용되는 패킷 필터링 도구 입니다. 이것은 매우 복잡한 도구이며, 
이 명령어의 사용법에 관한 자세한 설명은 이 문서의 범위를 벗어나는 것입니다. 
<a href="http://www.frozentux.net/iptables-tutorial/iptables-tutorial.html" 
target="_top">Oskar Andreasson's tutorial</a> 로 시작하면 좋을 것입니다.
</p>
<p>
<a href="./system.html#IPTABLES01">
<i class="FIRSTTERM">iptables</i> 닫기
</a> 와 
<a href="./networkprogramming.html#IPADDRESSES">Example 30-2</a> 를 참고하십시요.
</p>
</dd>
<dt>
<a name="CHKCONFIGREF">
</a>
<b class="COMMAND">chkconfig</b>
</dt>
<dd>
<p>네트웍과 시스템 설정을 확인합니다. 이 명령어는 부팅할 때
<tt class="FILENAME">/etc/rc?.d</tt> 디렉토리에 있는 네트웍과 시스템 서비스의 
리스트를 보여주고 관리합니다.</p>
<p>원래는 IRIX 에 있던 것을 Red Hat Linux 가 포팅한 것으로 다른 리눅스 배포판에는 
<b class="COMMAND">chkconfig</b> 가 기본 설치에 속하지 않을 수도 있습니다. (역자주: 
우분투에서는 chkconfig 대신 sysv-rc-conf 를 사용합니다.)
</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>chkconfig --list</b></tt>
<tt class="COMPUTEROUTPUT">atd             0:off   1:off   2:off   3:on    4:on    5:on    6:off
 rwhod           0:off   1:off   2:off   3:off   4:off   5:off   6:off
 ...</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="TCPDUMPREF">
</a>
<b class="COMMAND">tcpdump</b>
</dt>
<dd>
<p>Network packet <span class="QUOTE">"sniffer."</span> This is a tool for
	      analyzing and troubleshooting traffic on a network by dumping
	      packet headers that match specified criteria.</p>
<p>Dump ip packet traffic between hosts
	        <em>bozoville</em> and
	        <em>caduceus</em>:</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>tcpdump ip host bozoville and caduceus</b></tt>

</pre>
</font>
</td>
</tr>
</tbody>
</table>
	      </p>
<p>Of course, the output of <b class="COMMAND">tcpdump</b> can be
	        parsed with certain of the previously discussed <a href="./textproc.html#TPCOMMANDLISTING1">text processing
		utilities</a>.</p>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="FILESYSTEMSYS1">
</a>Filesystem</b>
</p>
<dl>
<dt>
<a name="MOUNTREF">
</a>
<b class="COMMAND">mount</b>
</dt>
<dd>
<p>Mount a filesystem, usually on an external device,
	      such as a floppy or CDROM. <a name="FSTABREF">
</a>The file
	      <tt class="FILENAME">/etc/fstab</tt> provides a handy listing
	      of available filesystems, partitions, and devices,
	      including options, that may be automatically or manually
	      mounted. The file <tt class="FILENAME">/etc/mtab</tt> shows
	      the currently mounted filesystems and partitions
	      (including the virtual ones, such as <tt class="FILENAME">/proc</tt>).</p>
<p>
<b class="COMMAND">mount -a</b> mounts all filesystems and
	      partitions listed in <tt class="FILENAME">/etc/fstab</tt>,
	      except those with a <tt class="OPTION">noauto</tt>
	      option. At bootup, a startup script in
	      <tt class="FILENAME">/etc/rc.d</tt>
	      (<tt class="FILENAME">rc.sysinit</tt> or something similar)
	      invokes this to get everything mounted.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">mount -t iso9660 /dev/cdrom /mnt/cdrom
# Mounts CD ROM. ISO 9660 is a standard CD ROM filesystem.
mount /mnt/cdrom
# Shortcut, if /mnt/cdrom listed in /etc/fstab</pre>
</font>
</td>
</tr>
</tbody>
</table>
     </p>
<p>
<a name="ISOMOUNTREF0">
</a>
</p>
<p>The versatile <i class="FIRSTTERM">mount</i> command can even
       mount an ordinary file on a block device, and the file will
       act as if it were a filesystem. <i class="FIRSTTERM">Mount</i>
       accomplishes that by associating the file with a <a href="./devref1.html#LOOPBACKREF">loopback device</a>. One application of
       this is to mount and examine an ISO9660 filesystem image before
       burning it onto a CDR.

	  <a name="AEN16255" href="#FTN.AEN16255">
<span class="footnote">[3]</span>
</a>

       </p>
<div class="EXAMPLE">
<a name="ISOMOUNTREF">
</a>
<p>
<b>Example 17-7. Checking a CD image</b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING"># As root...

mkdir /mnt/cdtest  # Prepare a mount point, if not already there.

mount -r -t iso9660 -o loop cd-image.iso /mnt/cdtest   # Mount the image.
#                  "-o loop" option equivalent to "losetup /dev/loop0"
cd /mnt/cdtest     # Now, check the image.
ls -alR            # List the files in the directory tree there.
                   # And so forth.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="UMOUNTREF">
</a>
<b class="COMMAND">umount</b>
</dt>
<dd>
<p>Unmount a currently mounted filesystem. Before physically removing a
	      previously mounted floppy or CDROM disk, the device must be
	      <b class="COMMAND">umount</b>ed, else filesystem corruption may result.
	      <table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">umount /mnt/cdrom
# You may now press the eject button and safely remove the disk.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>The <b class="COMMAND">automount</b> utility, if
		properly installed, can mount and unmount floppies or
		CDROM disks as they are accessed or removed. On
		<span class="QUOTE">"multispindle"</span> laptops with swappable
		floppy and optical drives, this can cause problems,
		however.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="GNOMEMOUNTREF">
</a>
<b class="COMMAND">gnome-mount</b>
</dt>
<dd>
<p>The newer Linux distros have deprecated
	    <b class="COMMAND">mount</b> and <b class="COMMAND">umount</b>.
	    The successor, for command-line mounting of removable storage
	    devices, is <b class="COMMAND">gnome-mount</b>. It can take the
	    <tt class="OPTION">-d</tt> option to mount a <a href="./devref1.html#DEVFILEREF">device file</a> by its listing in
	    <tt class="FILENAME">/dev</tt>.</p>
<p>For example, to mount a USB flash drive:</p>
<p>	    <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>gnome-mount -d /dev/sda1</b>
</tt>
<tt class="COMPUTEROUTPUT">gnome-mount 0.4</tt>


<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>df</b>
</tt>
<tt class="COMPUTEROUTPUT">. . .
 /dev/sda1                63584     12034     51550  19% /media/disk</tt>
 </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
</dd>
<dt>
<a name="SYNCREF">
</a>
<b class="COMMAND">sync</b>
</dt>
<dd>
<p>Forces an immediate write of all updated data from
	      buffers to hard drive (synchronize drive
	      with buffers). While not strictly necessary, a
	      <b class="COMMAND">sync</b> assures the sys admin or
	      user that the data just changed will survive a sudden
	      power failure. In the olden days, a <tt class="USERINPUT">
<b>sync;
	      sync</b>
</tt> (twice, just to make absolutely sure) was a
	      useful precautionary measure before a system reboot.</p>
<p>At times, you may wish to force an immediate buffer
	      flush, as when securely deleting a file (see <a href="./extmisc.html#BLOTOUT">Example 16-61</a>) or when the lights begin to
	      flicker.</p>
</dd>
<dt>
<a name="LOSETUPREF">
</a>
<b class="COMMAND">losetup</b>
</dt>
<dd>
<p>Sets up and configures <a href="./devref1.html#LOOPBACKREF">	      loopback devices</a>.</p>
<div class="EXAMPLE">
<a name="CREATEFS">
</a>
<p>
<b>Example 17-8. Creating a filesystem in a file</b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">SIZE=1000000  # 1 meg

head -c $SIZE &lt; /dev/zero &gt; file  # Set up file of designated size.
losetup /dev/loop0 file           # Set it up as loopback device.
mke2fs /dev/loop0                 # Create filesystem.
mount -o loop /dev/loop0 /mnt     # Mount it.

# Thanks, S.C.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="MKSWAPREF">
</a>
<b class="COMMAND">mkswap</b>
</dt>
<dd>
<p>Creates a swap partition or file. The swap area must
	      subsequently be enabled with
	      <b class="COMMAND">swapon</b>.</p>
</dd>
<dt>
<a name="SWAPONREF">
</a>
<b class="COMMAND">swapon</b>, <a name="SWAPOFFREF">
</a>
<b class="COMMAND">swapoff</b>
</dt>
<dd>
<p>Enable / disable swap partitition or file.
	      These commands usually take effect at bootup and
	      shutdown.</p>
</dd>
<dt>
<a name="MKE2FSREF">
</a>
<b class="COMMAND">mke2fs</b>
</dt>
<dd>
<p>Create a Linux <i class="FIRSTTERM">ext2</i>
	      filesystem. This command must be invoked as
	      <i class="FIRSTTERM">root</i>.</p>
<div class="EXAMPLE">
<a name="ADDDRV">
</a>
<p>
<b>Example 17-9. Adding a new hard drive</b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash

# Adding a second hard drive to system.
# Software configuration. Assumes hardware already mounted.
# From an article by the author of the ABS Guide.
# In issue #38 of _Linux Gazette_, http://www.linuxgazette.com.

ROOT_UID=0     # This script must be run as root.
E_NOTROOT=67   # Non-root exit error.

if [ "$UID" -ne "$ROOT_UID" ]
then
  echo "Must be root to run this script."
  exit $E_NOTROOT
fi  

# Use with extreme caution!
# If something goes wrong, you may wipe out your current filesystem.


NEWDISK=/dev/hdb         # Assumes /dev/hdb vacant. Check!
MOUNTPOINT=/mnt/newdisk  # Or choose another mount point.


fdisk $NEWDISK
mke2fs -cv $NEWDISK1   # Check for bad blocks (verbose output).
#  Note:           ^     /dev/hdb1, *not* /dev/hdb!
mkdir $MOUNTPOINT
chmod 777 $MOUNTPOINT  # Makes new drive accessible to all users.


# Now, test ...
# mount -t ext2 /dev/hdb1 /mnt/newdisk
# Try creating a directory.
# If it works, umount it, and proceed.

# Final step:
# Add the following line to /etc/fstab.
# /dev/hdb1  /mnt/newdisk  ext2  defaults  1 1

exit</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
<p>See also <a href="./system.html#CREATEFS">Example 17-8</a> and <a href="./zeros.html#RAMDISK">Example 31-3</a>.</p>
</dd>
<dt>
<a name="MKDOSFSREF">
</a>
<b class="COMMAND">mkdosfs</b>
</dt>
<dd>
<p>Create a DOS <i class="FIRSTTERM">FAT</i>
              filesystem.</p>
</dd>
<dt>
<a name="TUNE2FSREF">
</a>
<b class="COMMAND">tune2fs</b>
</dt>
<dd>
<p>Tune <i class="FIRSTTERM">ext2</i> filesystem. May be
	      used to change filesystem parameters, such as maximum
	      mount count. This must be invoked as
	      <i class="FIRSTTERM">root</i>.</p>
<div class="WARNING">
<p>
</p>
<table class="WARNING" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/warning.gif" alt="Warning" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>This is an extremely dangerous command. Use it at
	      your own risk, as you may inadvertently destroy your filesystem.
	      </p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="DUMPE2FSREF">
</a>
<b class="COMMAND">dumpe2fs</b>
</dt>
<dd>
<p>Dump (list to <tt class="FILENAME">stdout</tt>) very verbose
	      filesystem info. This must be invoked as
	      <i class="FIRSTTERM">root</i>.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">root# </tt>
<b class="COMMAND">dumpe2fs /dev/hda7 | grep 'ount count'</b>
<tt class="COMPUTEROUTPUT">dumpe2fs 1.19, 13-Jul-2000 for EXT2 FS 0.5b, 95/08/09
 Mount count:              6
 Maximum mount count:      20</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="HDPARMREF">
</a>
<b class="COMMAND">hdparm</b>
</dt>
<dd>
<p>List or change hard disk parameters. This command must be
	      invoked as <i class="FIRSTTERM">root</i>, and it may be
	      dangerous if misused.</p>
</dd>
<dt>
<a name="FDISKREF">
</a>
<b class="COMMAND">fdisk</b>
</dt>
<dd>
<p>Create or change a partition table on a storage device,
	      usually a hard drive. This command must be invoked as
	      <i class="FIRSTTERM">root</i>.</p>
<div class="WARNING">
<p>
</p>
<table class="WARNING" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/warning.gif" alt="Warning" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>Use this command with extreme caution. If something
	      goes wrong, you may destroy an existing
	      filesystem.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="FSCKREF">
</a>
<b class="COMMAND">fsck</b>, <a name="E2FSCKREF">
</a>
<b class="COMMAND">e2fsck</b>, <a name="DEBUGFSREF">
</a>
<b class="COMMAND">debugfs</b>
</dt>
<dd>
<p>Filesystem check, repair, and debug command set.</p>
<p>
<b class="COMMAND">fsck</b>: a front end for checking a UNIX
	      filesystem (may invoke other utilities). The actual
	      filesystem type generally defaults to
	      <i class="FIRSTTERM">ext2</i>.</p>
<p>
<b class="COMMAND">e2fsck</b>: ext2 filesystem checker.</p>
<p>
<b class="COMMAND">debugfs</b>: ext2 filesystem debugger.
	      One of the uses of this versatile, but dangerous command
	      is to (attempt to) recover deleted files. For advanced users
	      only!</p>
<div class="CAUTION">
<p>
</p>
<table class="CAUTION" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/caution.gif" alt="Caution" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>All of these should be invoked as
	      <i class="FIRSTTERM">root</i>, and they can damage or destroy
	      a filesystem if misused.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="BADBLOCKSREF">
</a>
<b class="COMMAND">badblocks</b>
</dt>
<dd>
<p>저장 장치에서 배드 블럭을 체크합니다. 이 명령어는 하드 드라이브를 
포맷할 때나 백업 장치의 무결성을 시험해볼 때 사용합니다. 
<a name="AEN16504" href="#FTN.AEN16504"><span class="footnote">[4]</span></a> 
예를 들면, 
<b class="COMMAND">badblocks /dev/fd0</b> 는 플로피 디스크를 체크합니다.
(역주: 플로피 디스크를 알까?)</p>
<p>
<b class="COMMAND">badblocks</b> 명령어는 삭제 동작을 하거나 (모든 자료를 덮어씀), 
읽기 전용 모드로 사용될 수 있습니다. 만일 
<i class="FIRSTTERM">관리자</i> 가 테스트를 할 디바이스의 소유자라면, 보통, 
<i class="FIRSTTERM">root</i> 명령어로 실행해야 합니다.</p>
</dd>
<dt>
<a name="LSUSBREF">
</a>
<b class="COMMAND">lsusb</b>, <b class="COMMAND">usbmodules</b>
</dt>
<dd>
<p>The <b class="COMMAND">lsusb</b> command lists all USB
	      (Universal Serial Bus) buses and the devices hooked up to
	      them.</p>
<p>The <b class="COMMAND">usbmodules</b> command outputs
	      information about the driver modules for connected USB
	      devices.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>lsusb</b>
</tt>
<tt class="COMPUTEROUTPUT">Bus 001 Device 001: ID 0000:0000  
 Device Descriptor:
   bLength                18
   bDescriptorType         1
   bcdUSB               1.00
   bDeviceClass            9 Hub
   bDeviceSubClass         0 
   bDeviceProtocol         0 
   bMaxPacketSize0         8
   idVendor           0x0000 
   idProduct          0x0000

   . . .</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
            </p>
</dd>
<dt>
<a name="LSPCIREF">
</a>
<b class="COMMAND">lspci</b>
</dt>
<dd>
<p>Lists <i class="FIRSTTERM">pci</i> busses present.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>lspci</b>
</tt>
<tt class="COMPUTEROUTPUT">00:00.0 Host bridge: Intel Corporation 82845 845
 (Brookdale) Chipset Host Bridge (rev 04)
 00:01.0 PCI bridge: Intel Corporation 82845 845
 (Brookdale) Chipset AGP Bridge (rev 04)
 00:1d.0 USB Controller: Intel Corporation 82801CA/CAM USB (Hub #1) (rev 02)
 00:1d.1 USB Controller: Intel Corporation 82801CA/CAM USB (Hub #2) (rev 02)
 00:1d.2 USB Controller: Intel Corporation 82801CA/CAM USB (Hub #3) (rev 02)
 00:1e.0 PCI bridge: Intel Corporation 82801 Mobile PCI Bridge (rev 42)

   . . .</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
            </p>
</dd>
<dt>
<a name="MKBOOTDISKREF">
</a>
<b class="COMMAND">mkbootdisk</b>
</dt>
<dd>
<p>Creates a boot floppy which can be used to bring up the
	      system if, for example, the MBR (master boot record) becomes
	      corrupted. Of special interest is the <tt class="OPTION">--iso</tt>
	      option, which uses <b class="COMMAND">mkisofs</b> to create a
	      bootable <i class="FIRSTTERM">ISO9660</i> filesystem image
	      suitable for burning a bootable CDR.</p>
<p>The <b class="COMMAND">mkbootdisk</b> command is actually
	      a Bash script, written by Erik Troan, in the <tt class="FILENAME">/sbin</tt> directory.</p>
</dd>
<dt>
<a name="MKISOFSREF">
</a>
<b class="COMMAND">mkisofs</b>
</dt>
<dd>
<p>Creates an <i class="FIRSTTERM">ISO9660</i> filesystem
	      suitable for a CDR image.</p>
</dd>
<dt>
<a name="CHROOTREF">
</a>
<b class="COMMAND">chroot</b>
</dt>
<dd>
<p>루트 디렉토리를 바꿔줍니다 ( CHange ROOT directory). 명령어들은 보통 
기본 
<i class="FIRSTTERM">루트 디렉토리</i> 인  
<tt class="FILENAME">/</tt> 를 기준으로 
<a href="./internalvariables.html#PATHREF">$PATH</a> 에 따라 해석됩니다. 이 명령어는 
<i class="FIRSTTERM">root</i> 를 다른 곳으로 바꿉니다 ( 그리고 물론 작업 디렉토리도 
그 쪽으로 바꿉니다). 이 것은 보안용으로 아주 유용한데, 예를 들어 시스템 관리자가 
<a href="./communications.html#TELNETREF">telnetting</a> 와 같은 것으로 접속해 있는 
특정 사용자가 보안과 관련된 파일 시스템에 접근하지 못하도록 할 때 ( 이것은 때때로 
<span class="QUOTE">"chroot 감옥"</span> 에 가둔다라고도 합니다. ) 사용합니다. 
<b class="COMMAND">chroot</b> 를 사용한 후에는, 시스템 바이너리의 실행 경로가 더 이상
유용하지 않음에 주의하십시요.</p>
<p>A <tt class="USERINPUT">
<b>chroot /opt</b>
</tt> 는 
<tt class="FILENAME">/usr/bin</tt> 을 
<tt class="FILENAME">/opt/usr/bin</tt> 로 해석합니다. 비슷하게, 보통의 상황에서는 
<tt class="FILENAME">/</tt> 을 기본 디렉토리로 삼지만, 
<tt class="USERINPUT">
<b>chroot /aaa/bbb /bin/ls</b>
</tt> 는 이후에 실행되는 
<b class="COMMAND">ls</b> 는 
<tt class="FILENAME">/aaa/bbb</tt> 를 기본 디렉토리로 인식합니다. 
사용자의 
<a href="./sample-bashrc.html">
<tt class="FILENAME">~/.bashrc</tt>
</a> 에 
<b class="COMMAND">alias XX 'chroot /aaa/bbb ls'</b> 라는 줄을 넣으면 그 사용자가 
<span class="QUOTE">"XX"</span> 를 실행시키는 파일 시스템을 효과적으로 제한할 수 
있습니다.</p>
<p>
<b class="COMMAND">chroot</b> 명령어는 비상용 부트 플로피로 부팅했을 때(
<tt class="FILENAME">/dev/fd0</tt>를 <b class="COMMAND">chroot</b> 로 )나 
시스템 충돌로 고치려고 할 때 
<b class="COMMAND">lilo</b> 에 옵션으로 줄 때 유용합니다. 다른 파일 시스템을 통해서 
설치를 할 경우 (
<a href="./filearchiv.html#RPMREF">rpm</a> 옵션) 나 CD ROM 같은 읽기 전용 파일 시스템에서 
실행할 때 쓸 수 있습니다. 오직 <i class="FIRSTTERM">관리자</i> 로만 실행할 수 있으며, 
조심해서 써야 합니다.</p>
<div class="CAUTION">
<p>
</p>
<table class="CAUTION" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/caution.gif" alt="Caution" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>어떤 시스템 파일들은 
<i class="FIRSTTERM">chroot</i> 한 디렉토리에 복사해야할 수도 있습니다, 
왜냐하면 일반적인 
<tt class="VARNAME">$PATH</tt> 는 더 이상 신뢰할 수 없기 때문입니다.
</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="LOCKFILEREF">
</a>
<b class="COMMAND">lockfile</b>
</dt>
<dd>
<p>This utility is part of the <b class="COMMAND">procmail</b>
	      package (<a href="http://www.procmail.org/" target="_top">www.procmail.org</a>).
	      It creates a <i class="FIRSTTERM">lock file</i>, a
	      <i class="FIRSTTERM">semaphore</i> that controls access to
	      a file, device, or resource.</p>
<table class="SIDEBAR" border="1" cellpadding="5">
<tbody>
<tr>
<td>
<div class="SIDEBAR">
<a name="AEN16645">
</a>
<p>
</p>
<p>
<a name="SEMAPHOREREF">
</a>
		  <tt class="USERINPUT">
<b>Definition:</b>
</tt>
		  A <i class="FIRSTTERM">semaphore</i> is a flag or
		  signal. (The usage originated in railroading, where a
		  colored flag, lantern, or striped movable arm
		  <i class="FIRSTTERM">semaphore</i> indicated whether a
		  particular track was in use and therefore unavailable
		  for another train.) A UNIX process can check the
		  appropriate semaphore to determine whether a particular
		  resource is available/accessible.</p>
<p>
</p>
</div>
</td>
</tr>
</tbody>
</table>
<p>The lock file serves as a flag that this particular
	      file, device, or resource is in use by a process (and
	      is therefore <span class="QUOTE">"busy"</span>). The presence of a
	      lock file permits only restricted access (or no access)
	      to other processes.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">lockfile /home/bozo/lockfiles/$0.lock
# Creates a write-protected lockfile prefixed with the name of the script.

lockfile /home/bozo/lockfiles/${0##*/}.lock
# A safer version of the above, as pointed out by E. Choroba.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
<p>Lock files are used in such applications as protecting 
	      system mail folders from simultaneously being changed
	      by multiple users, indicating that a modem port
	      is being accessed, and showing that an instance of
	      <span class="APPLICATION">Firefox</span> is using its cache.
	      Scripts may check for the existence of a lock file created
	      by a certain process to check if that process is running.
	      Note that if a script attempts to create a lock file that
	      already exists, the script will likely hang.</p>
<p>Normally, applications create and check for lock files
	      in the <tt class="FILENAME">/var/lock</tt>
	      directory.
	         <a name="AEN16659" href="#FTN.AEN16659">
<span class="footnote">[5]</span>
</a>
	      A script can test for the presence of a lock file by
	      something like the following.
	        <table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">appname=xyzip
# Application "xyzip" created lock file "/var/lock/xyzip.lock".

if [ -e "/var/lock/$appname.lock" ]
then   #+ Prevent other programs &amp; scripts
       #  from accessing files/resources used by xyzip.
  ...</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt>
<a name="FLOCKREF">
</a>
<b class="COMMAND">flock</b>
</dt>
<dd>
<p>Much less useful than the <b class="COMMAND">lockfile</b>
	      command is <b class="COMMAND">flock</b>. It sets an
	      <span class="QUOTE">"advisory"</span> lock on a file and then executes
	      a command while the lock is on. This is to prevent
	      any other process from setting a lock on that file until
	      completion of the specified command.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">flock $0 cat $0 &gt; lockfile__$0
#  Set a lock on the script the above line appears in,
#+ while listing the script to stdout.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>Unlike <b class="COMMAND">lockfile</b>,
	      <b class="COMMAND">flock</b> does <em>not</em>
	      automatically create a lock file.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="MKNODREF">
</a>
<b class="COMMAND">mknod</b>
</dt>
<dd>
<p>Creates block or character <a href="./devref1.html#DEVFILEREF">device files</a> (may be
	      necessary when installing new hardware on the system). The
	      <b class="COMMAND">MAKEDEV</b> utility has virtually
	      all of the functionality of <b class="COMMAND">mknod</b>,
	      and is easier to use.</p>
</dd>
<dt>
<a name="MAKEDEVREF">
</a>
<b class="COMMAND">MAKEDEV</b>
</dt>
<dd>
<p>Utility for creating device files. It must be run as
	      <i class="FIRSTTERM">root</i>, and in the <tt class="FILENAME">/dev</tt> directory. It is a sort
	      of advanced version of <b class="COMMAND">mknod</b>.</p>
</dd>
<dt>
<a name="TMPWATCHREF">
</a>
<b class="COMMAND">tmpwatch</b>
</dt>
<dd>
<p>Automatically deletes files which have not been accessed
	      within a specified period of time. Usually invoked by
	      <a href="./system.html#CRONREF">cron</a> to remove stale log
	      files.</p>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="PERIPHSYS1">
</a>Backup</b>
</p>
<dl>
<dt>
<a name="DUMPREF">
</a>
<b class="COMMAND">dump</b>, <a name="RESTOREREF">
</a>
<b class="COMMAND">restore</b>
</dt>
<dd>
<p>The <b class="COMMAND">dump</b> command is an elaborate
	      filesystem backup utility, generally used on larger
	      installations and networks.
		<a name="AEN16748" href="#FTN.AEN16748">
<span class="footnote">[6]</span>
</a>
	      It reads raw disk partitions and writes a backup file
	      in a binary format.  Files to be backed up may be saved
	      to a variety of storage media, including disks and tape
	      drives. The <b class="COMMAND">restore</b> command restores
	      backups made with <b class="COMMAND">dump</b>.</p>
</dd>
<dt>
<a name="FDFORMATREF">
</a>
<b class="COMMAND">fdformat</b>
</dt>
<dd>
<p>Perform a low-level format on a floppy disk
	    (<tt class="FILENAME">/dev/fd0*</tt>).</p>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="SYSRESOURCES1">
</a>System Resources</b>
</p>
<dl>
<dt>
<a name="ULIMITREF">
</a>
<b class="COMMAND">ulimit</b>
</dt>
<dd>
<p>Sets an <i class="FIRSTTERM">upper limit</i> on use
	     of system resources. Usually invoked with the
	     <tt class="OPTION">-f</tt> option, which sets a limit on file size
	     (<b class="COMMAND">ulimit -f 1000</b> limits files to 1 meg
	     maximum).
                <a name="AEN16782" href="#FTN.AEN16782">
<span class="footnote">[7]</span>
</a>
	     The <tt class="OPTION">-t</tt> option limits the coredump
	     size (<b class="COMMAND">ulimit -c 0</b> eliminates coredumps).
	     Normally, the value of <b class="COMMAND">ulimit</b>
	     would be set in <tt class="FILENAME">/etc/profile</tt>
	     and/or <tt class="FILENAME">~/.bash_profile</tt> (see <a href="./files.html">Appendix H</a>).</p>
<div class="IMPORTANT">
<p>
</p>
<table class="IMPORTANT" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/important.gif" alt="Important" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>Judicious use of <b class="COMMAND">ulimit</b> can
	      protect a system against the dreaded <i class="FIRSTTERM">fork
	      bomb</i>.</p>
<p>	    <table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash
# This script is for illustrative purposes only.
# Run it at your own peril -- it WILL freeze your system.

while true  #  Endless loop.
do
  $0 &amp;      #  This script invokes itself . . .
            #+ forks an infinite number of times . . .
            #+ until the system freezes up because all resources exhausted.
done        #  This is the notorious <span class="QUOTE">"sorcerer's appentice"</span> scenario.

exit 0      #  Will not exit here, because this script will never terminate.</pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<p>A <b class="COMMAND">ulimit -Hu XX</b> (where
	      <em>XX</em> is the user process limit) in
	      <tt class="FILENAME">/etc/profile</tt> would abort
	      this script when it exceeded the preset limit.
	    </p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="QUOTAREF">
</a>
<b class="COMMAND">quota</b>
</dt>
<dd>
<p>Display user or group disk quotas.</p>
</dd>
<dt>
<a name="SETQUOTAREF">
</a>
<b class="COMMAND">setquota</b>
</dt>
<dd>
<p>Set user or group disk quotas from the command-line.</p>
</dd>
<dt>
<a name="UMASKREF">
</a>
<b class="COMMAND">umask</b>
</dt>
<dd>
<p>User file creation permissions
	      <i class="FIRSTTERM">mask</i>. Limit the default file
	      attributes for a particular user.  All files created
	      by that user take on the attributes specified by
	      <b class="COMMAND">umask</b>. The (octal) value passed to
	      <b class="COMMAND">umask</b> defines the file permissions
	      <i class="FIRSTTERM">disabled</i>. For example, <b class="COMMAND">umask
	      022</b> ensures that new files will have at most
	      755 permissions (777 NAND 022).

                <a name="AEN16847" href="#FTN.AEN16847">
<span class="footnote">[8]</span>
</a>

	      Of course, the user may later change the
	      attributes of particular files with <a href="./basic.html#CHMODREF">chmod</a>. The usual practice
	      is to set the value of <b class="COMMAND">umask</b>
	      in <tt class="FILENAME">/etc/profile</tt> and/or
	      <tt class="FILENAME">~/.bash_profile</tt> (see <a href="./files.html">Appendix H</a>).</p>
<div class="EXAMPLE">
<a name="ROT13A">
</a>
<p>
<b>Example 17-10. Using <i class="FIRSTTERM">umask</i> to hide an output file
	        from prying eyes</b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash
# rot13a.sh: Same as "rot13.sh" script, but writes output to "secure" file.

# Usage: ./rot13a.sh filename
# or     ./rot13a.sh &lt;filename
# or     ./rot13a.sh and supply keyboard input (stdin)

umask 177               #  File creation mask.
                        #  Files created by this script
                        #+ will have 600 permissions.

OUTFILE=decrypted.txt   #  Results output to file "decrypted.txt"
                        #+ which can only be read/written
                        #  by invoker of script (or root).

cat "$@" | tr 'a-zA-Z' 'n-za-mN-ZA-M' &gt; $OUTFILE 
#    ^^ Input from stdin or a file.   ^^^^^^^^^^ Output redirected to file. 

exit 0</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="RDEVREF">
</a>
<b class="COMMAND">rdev</b>
</dt>
<dd>
<p>Get info about or make changes to root device, swap space, or video
	       mode.  The functionality of <b class="COMMAND">rdev</b> has generally been taken over by
	       <b class="COMMAND">lilo</b>, but <b class="COMMAND">rdev</b> remains
	       useful for setting up a ram disk. This is a dangerous command, if misused.
	     </p>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="MODULESSYS1">
</a>Modules</b>
</p>
<dl>
<dt>
<a name="LSMODREF">
</a>
<b class="COMMAND">lsmod</b>
</dt>
<dd>
<p>List installed kernel modules.</p>
<p>	      <table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>lsmod</b>
</tt>
<tt class="COMPUTEROUTPUT">Module                  Size  Used by
 autofs                  9456   2 (autoclean)
 opl3                   11376   0
 serial_cs               5456   0 (unused)
 sb                     34752   0
 uart401                 6384   0 [sb]
 sound                  58368   0 [opl3 sb uart401]
 soundlow                 464   0 [sound]
 soundcore               2800   6 [sb sound]
 ds                      6448   2 [serial_cs]
 i82365                 22928   2
 pcmcia_core            45984   0 [serial_cs ds i82365]</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
	    </p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>Doing a <b class="COMMAND">cat /proc/modules</b> gives the
	      same information.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="INSMODREF">
</a>
<b class="COMMAND">insmod</b>
</dt>
<dd>
<p>Force installation of a kernel module (use
	      <b class="COMMAND">modprobe</b> instead, when possible). Must
	      be invoked as <i class="FIRSTTERM">root</i>.</p>
</dd>
<dt>
<a name="RMMODREF">
</a>
<b class="COMMAND">rmmod</b>
</dt>
<dd>
<p>Force unloading of a kernel module. Must be invoked
	      as <i class="FIRSTTERM">root</i>.</p>
</dd>
<dt>
<a name="MODPROBEREF">
</a>
<b class="COMMAND">modprobe</b>
</dt>
<dd>
<p>Module loader that is normally invoked automatically
	      in a startup script. Must be invoked as
	      <i class="FIRSTTERM">root</i>.</p>
</dd>
<dt>
<a name="DEPMODREF">
</a>
<b class="COMMAND">depmod</b>
</dt>
<dd>
<p>Creates module dependency file. Usually invoked from a
	      startup script.</p>
</dd>
<dt>
<a name="MODINFOREF">
</a>
<b class="COMMAND">modinfo</b>
</dt>
<dd>
<p>Output information about a loadable module.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>modinfo hid</b>
</tt>
<tt class="COMPUTEROUTPUT">filename:    /lib/modules/2.4.20-6/kernel/drivers/usb/hid.o
 description: "USB HID support drivers"
 author:      "Andreas Gal, Vojtech Pavlik &lt;vojtech@suse.cz&gt;"
 license:     "GPL"</tt>
	      </pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<p>
</p>
<div class="VARIABLELIST">
<p>
<b>
<a name="MISCSYS1">
</a>Miscellaneous</b>
</p>
<dl>
<dt>
<a name="ENVVREF">
</a>
<b class="COMMAND">env</b>
</dt>
<dd>
<p>	      Runs a program or script with certain <a href="./othertypesv.html#ENVREF">environmental variables</a>
	      set or changed (without changing the overall system
	      environment). The <tt class="OPTION">[varname=xxx]</tt>
	      permits changing the environmental variable
	      <tt class="VARNAME">varname</tt> for the duration of the
	      script. With no options specified, this command lists all
	      the environmental variable settings.

	    <a name="AEN16975" href="#FTN.AEN16975">
<span class="footnote">[9]</span>
</a>
	    </p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>
<a name="ENVV2REF">
</a>The first line of a script (the
	      <span class="QUOTE">"sha-bang"</span> line) may use <b class="COMMAND">env</b>
	      when the path to the shell or interpreter is unknown.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#! /usr/bin/env perl

print "This Perl script will run,\n";
print "even when I don't know where to find Perl.\n";

# Good for portable cross-platform scripts,
# where the Perl binaries may not be in the expected place.
# Thanks, S.C.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
<p>Or even ... </p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/env bash
# Queries the $PATH enviromental variable for the location of bash.
# Therefore ...
# This script will run where Bash is not in its usual place, in /bin.
...</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="LDDREF">
</a>
<b class="COMMAND">ldd</b>
</dt>
<dd>
<p>Show shared lib dependencies for an executable file.</p>
<table bgcolor="#E0E0E0" border="1" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="SCREEN">
<tt class="PROMPT">bash$ </tt>
<tt class="USERINPUT">
<b>ldd /bin/ls</b>
</tt>
<tt class="COMPUTEROUTPUT">libc.so.6 =&gt; /lib/libc.so.6 (0x4000c000)
/lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x80000000)</tt>
</pre>
</font>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>
<a name="WATCHREF">
</a>
<b class="COMMAND">watch</b>
</dt>
<dd>
<p>Run a command repeatedly, at specified time intervals.</p>
<p>The default is two-second intervals, but this may be changed
	      with the <tt class="OPTION">-n</tt> option.</p>
<p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">watch -n 5 tail /var/log/messages
# Shows tail end of system log, /var/log/messages, every five seconds.</pre>
</font>
</td>
</tr>
</tbody>
</table>
</p>
<div class="NOTE">
<p>
</p>
<table class="NOTE" border="0" width="90%">
<tbody>
<tr>
<td align="CENTER" valign="TOP" width="25">
<img src="system_files/note.gif" alt="Note" hspace="5">
</td>
<td align="LEFT" valign="TOP">
<p>Unfortunately, <a href="./special-chars.html#PIPEREF">piping</a>
	      the output of <b class="COMMAND">watch command</b> to <a href="./textproc.html#GREPREF">grep</a> does not work.</p>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="STRIPREF">
</a>
<b class="COMMAND">strip</b>
</dt>
<dd>
<p>Remove the debugging symbolic references from an executable
	      binary. This decreases its size, but makes debugging it
	      impossible.</p>
<p>This command often occurs in a <a href="./filearchiv.html#MAKEFILEREF">Makefile</a>,
	      but rarely in a shell script.</p>
</dd>
<dt>
<a name="NMREF">
</a>
<b class="COMMAND">nm</b>
</dt>
<dd>
<p>List symbols in an unstripped compiled binary.</p>
</dd>
<dt>
<a name="XRANDRREF">
</a>
<b class="COMMAND">xrandr</b>
</dt>
<dd>
<p>Command-line tool for manipulating the root window
              of the screen.</p>
<div class="EXAMPLE">
<a name="BACKLIGHT">
</a>
<p>
<b>Example 17-11. <i class="FIRSTTERM">Backlight</i>: changes
	        the brightness of the (laptop) screen backlight</b>
</p>
<table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">#!/bin/bash
# backlight.sh
# reldate 02dec2011

#  A bug in Fedora Core 16/17 messes up the keyboard backlight controls.
#  This script is a quick-n-dirty workaround, essentially a shell wrapper
#+ for xrandr. It gives more control than on-screen sliders and widgets.

OUTPUT=$(xrandr | grep LV | awk '{print $1}')   # Get display name!
INCR=.05      # For finer-grained control, set INCR to .03 or .02.

old_brightness=$(xrandr --verbose | grep rightness | awk '{ print $2 }')


if [ -z "$1" ]
then
  bright=1    # If no command-line arg, set brightness to 1.0 (default).

  else
    if [ "$1" = "+" ]
    then
      bright=$(echo "scale=2; $old_brightness + $INCR" | bc)   # +.05

  else
    if [ "$1" = "-" ]
    then
      bright=$(echo "scale=2; $old_brightness - $INCR" | bc)   # -.05

  else
    if [ "$1" = "#" ]   # Echoes current brightness; does not change it.
    then
      bright=$old_brightness

  else
    if [[ "$1" = "h" || "$1" = "H" ]]
    then
      echo
      echo "Usage:"
      echo "$0 [No args]    Sets/resets brightness to default (1.0)."
      echo "$0 +            Increments brightness by 0.5."
      echo "$0 -            Decrements brightness by 0.5."
      echo "$0 #            Echoes current brightness without changing it."
      echo "$0 N (number)   Sets brightness to N (useful range .7 - 1.2)."
      echo "$0 h [H]        Echoes this help message."
      echo "$0 any-other    Gives xrandr usage message."

      bright=$old_brightness

  else
    bright="$1"

      fi
     fi
    fi
  fi
fi


xrandr --output "$OUTPUT" --brightness "$bright"   # See xrandr manpage.
                                                   # As root!
E_CHANGE0=$?
echo "Current brightness = $bright"

exit $E_CHANGE0


# =========== Or, alternately . . . ==================== #

#!/bin/bash
# backlight2.sh
# reldate 20jun2012

#  A bug in Fedora Core 16/17 messes up the keyboard backlight controls.
#  This is a quick-n-dirty workaround, an alternate to backlight.sh.

target_dir=\
/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/backlight/acpi_video0
# Hardware directory.

actual_brightness=$(cat $target_dir/actual_brightness)
max_brightness=$(cat $target_dir/max_brightness)
Brightness=$target_dir/brightness

let "req_brightness = actual_brightness"   # Requested brightness.

if [ "$1" = "-" ]
then     # Decrement brightness 1 notch.
  let "req_brightness = $actual_brightness - 1"
else
  if [ "$1" = "+" ]
  then   # Increment brightness 1 notch.
    let "req_brightness = $actual_brightness + 1"
   fi
fi

if [ $req_brightness -gt $max_brightness ]
then
  req_brightness=$max_brightness
fi   # Do not exceed max. hardware design brightness.

echo

echo "Old brightness = $actual_brightness"
echo "Max brightness = $max_brightness"
echo "Requested brightness = $req_brightness"
echo

# =====================================
echo $req_brightness &gt; $Brightness
# Must be root for this to take effect.
E_CHANGE1=$?   # Successful?
# =====================================

if [ "$?" -eq 0 ]
then
  echo "Changed brightness!"
else
  echo "Failed to change brightness!"
fi

act_brightness=$(cat $Brightness)
echo "Actual brightness = $act_brightness"

scale0=2
sf=100 # Scale factor.
pct=$(echo "scale=$scale0; $act_brightness / $max_brightness * $sf" | bc)
echo "Percentage brightness = $pct%"

exit $E_CHANGE1</pre>
</font>
</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<a name="RDISTREF">
</a>
<b class="COMMAND">rdist</b>
</dt>
<dd>
<p>Remote distribution client: synchronizes, clones,
	      or backs up a file system on a remote server.</p>
</dd>
</dl>
</div>
</div>
<h3 class="FOOTNOTES">Notes</h3>
<table class="FOOTNOTES" border="0" width="100%">
<tbody>
<tr>
<td align="LEFT" valign="TOP" width="5%">
<a name="FTN.AEN14695" href="./system.html#AEN14695">
<span class="footnote">[1]</span>
</a>
</td>
<td align="LEFT" valign="TOP" width="95%">
<p>This is the case on a Linux machine or a UNIX
		   system with disk quotas.</p>
</td>
</tr>
<tr>
<td align="LEFT" valign="TOP" width="5%">
<a name="FTN.AEN14727" href="./system.html#AEN14727">
<span class="footnote">[2]</span>
</a>
</td>
<td align="LEFT" valign="TOP" width="95%">
<p>The <b class="COMMAND">userdel</b> command
		   will fail if the particular user being deleted is
		   still logged on.</p>
</td>
</tr>
<tr>
<td align="LEFT" valign="TOP" width="5%">
<a name="FTN.AEN16255" href="./system.html#AEN16255">
<span class="footnote">[3]</span>
</a>
</td>
<td align="LEFT" valign="TOP" width="95%">
<p>For more detail on burning CDRs, see Alex
	    Withers' article, <a href="http://www2.linuxjournal.com/lj-issues/issue66/3335.html" target="_top">Creating
	    CDs</a>, in the October, 1999 issue of <a href="http://www.linuxjournal.com/" target="_top">
<i class="CITETITLE">Linux
	     Journal</i>
</a>.</p>
</td>
</tr>
<tr>
<td align="LEFT" valign="TOP" width="5%">
<a name="FTN.AEN16504" href="./system.html#AEN16504">
<span class="footnote">[4]</span>
</a>
</td>
<td align="LEFT" valign="TOP" width="95%">
<p>The <tt class="OPTION">-c</tt> option to <a href="./system.html#MKE2FSREF">mke2fs</a> also invokes a check for bad
		blocks.</p>
</td>
</tr>
<tr>
<td align="LEFT" valign="TOP" width="5%">
<a name="FTN.AEN16659" href="./system.html#AEN16659">
<span class="footnote">[5]</span>
</a>
</td>
<td align="LEFT" valign="TOP" width="95%">
<p>Since only <i class="FIRSTTERM">root</i>
		 has write permission in the <tt class="FILENAME">/var/lock</tt> directory,
		 a user script cannot set a lock file there.</p>
</td>
</tr>
<tr>
<td align="LEFT" valign="TOP" width="5%">
<a name="FTN.AEN16748" href="./system.html#AEN16748">
<span class="footnote">[6]</span>
</a>
</td>
<td align="LEFT" valign="TOP" width="95%">
<p>Operators of single-user Linux systems
		  generally prefer something simpler for backups, such
		  as <b class="COMMAND">tar</b>.</p>
</td>
</tr>
<tr>
<td align="LEFT" valign="TOP" width="5%">
<a name="FTN.AEN16782" href="./system.html#AEN16782">
<span class="footnote">[7]</span>
</a>
</td>
<td align="LEFT" valign="TOP" width="95%">
<p>As of the <a href="./bashver4.html#BASH4REF">version
                4 update</a> of Bash, the <tt class="OPTION">-f</tt>
                and <tt class="OPTION">-c</tt> options take a block size
                of 512 when in <a href="./sha-bang.html#POSIX2REF">POSIX</a>
		mode. Additionally, there are two new options:
		<tt class="OPTION">-b</tt> for <a href="./devref1.html#SOCKETREF">socket</a> buffer size, and
		<tt class="OPTION">-T</tt> for the limit on the number of
		<i class="FIRSTTERM">threads</i>.</p>
</td>
</tr>
<tr>
<td align="LEFT" valign="TOP" width="5%">
<a name="FTN.AEN16847" href="./system.html#AEN16847">
<span class="footnote">[8]</span>
</a>
</td>
<td align="LEFT" valign="TOP" width="95%">
<p>NAND is the logical
		  <i class="FIRSTTERM">not-and</i> operator. Its effect
		  is somewhat similar to subtraction.</p>
</td>
</tr>
<tr>
<td align="LEFT" valign="TOP" width="5%">
<a name="FTN.AEN16975" href="./system.html#AEN16975">
<span class="footnote">[9]</span>
</a>
</td>
<td align="LEFT" valign="TOP" width="95%">
<p>In Bash and other Bourne shell derivatives, it is
	      possible to set variables in a single command's environment.
	      <table bgcolor="#E0E0E0" border="0" width="90%">
<tbody>
<tr>
<td>
<font color="#000000">
<pre class="PROGRAMLISTING">var1=value1 var2=value2 commandXXX
# $var1 and $var2 set in the environment of 'commandXXX' only.</pre>
</font>
</td>
</tr>
</tbody>
</table>	      
            </p>
</td>
</tr>
</tbody>
</table>
<div class="NAVFOOTER">
<hr align="LEFT" width="100%">
<table summary="Footer navigation table" border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td align="left" valign="top" width="33%">
<a href="./extmisc.html" accesskey="P">Prev</a>
</td>
<td align="center" valign="top" width="34%">
<a href="./index.html" accesskey="H">Home</a>
</td>
<td align="right" valign="top" width="33%">
<a href="./sysscripts.html" accesskey="N">Next</a>
</td>
</tr>
<tr>
<td align="left" valign="top" width="33%">Miscellaneous Commands</td>
<td align="center" valign="top" width="34%">
<a href="./part4.html" accesskey="U">Up</a>
</td>
<td align="right" valign="top" width="33%">Analyzing a System Script</td>
</tr>
</tbody>
</table>
</div>
</body>
</html>
